(this["webpackJsonpmusic-web-app"]=this["webpackJsonpmusic-web-app"]||[]).push([[0],{139:function(e,t,a){e.exports=a(290)},144:function(e,t,a){},145:function(e,t,a){},151:function(e,t,a){},152:function(e,t,a){},284:function(e,t,a){},286:function(e,t,a){},287:function(e,t,a){},290:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(15),s=a.n(l);a(144),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var i=a(4),o=a(6),c=a(9),u=a(8),h=a(13),m=a(7),p=a(36),d=a.n(p),f=(a(145),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("div",{style:{display:"flex",justifyContent:"center",margin:"4vh"}},r.a.createElement("img",{src:d.a,className:"Logo",alt:"logo"})),r.a.createElement("div",{className:"Container-home"},r.a.createElement("div",null,r.a.createElement("h1",null,"Explore your song"),r.a.createElement("p",null,"Discover detailed analytics for your music. Go deeper and find out what Spotify's algorithms say about your songs!")),r.a.createElement("div",null,r.a.createElement("h1",null,"Find the right playlist for your song"),r.a.createElement("p",null,"Choose a song and see how well it fits in a given playlist.")),r.a.createElement("div",null,r.a.createElement(h.b,{to:"/song"},r.a.createElement("button",null,"Analyse a song"))),r.a.createElement("div",null,r.a.createElement(h.b,{to:"/playlist"},r.a.createElement("button",null,"Choose a playlist"))))))}}]),a}(r.a.Component)),g=a(3),y=a.n(g),b=a(11),E=a(22),v=(a(98),function e(){Object(i.a)(this,e)});v.getToken=Object(b.a)(y.a.mark((function e(){var t,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/authenticate");case 2:return t=e.sent,e.next=5,t.json();case 5:if(a=e.sent,200===t.status){e.next=8;break}throw Error(a.message);case 8:return e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)}))),v.fetchData=function(){var e=Object(b.a)(y.a.mark((function e(t,a,n){var r,l,s,i,o,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="",e.next=3,v.getToken();case 3:return l=e.sent,s=l.myToken,i={headers:{Authorization:"Bearer "+s}},o="","search"===a?(t=t.replace(/\\|#|%|{|}|\^|\||`/g,""),"https://api.spotify.com/v1/search?",o="https://api.spotify.com/v1/search?"+("q="+t)+("&type="+n)):"analysis"===a&&("https://api.spotify.com/v1/",o="https://api.spotify.com/v1/"+n+t),e.next=10,fetch(o,i);case 10:return c=e.sent,e.next=13,c.json();case 13:return r=e.sent,e.abrupt("return",r);case 15:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}();var w=v,k=(a(151),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"onCardClick",value:function(){}},{key:"render",value:function(){return r.a.createElement("div",{className:"Result-card",onClick:this.props.buttonClick},r.a.createElement("div",{className:"Container-song"},r.a.createElement("div",null,r.a.createElement("img",{className:"Album-art",src:this.props.artwork,alt:"album artwork"})),r.a.createElement("div",{className:"Song-info"},r.a.createElement("p",{className:"Info-name"},this.props.name),r.a.createElement("p",{className:"Info"},this.props.album),r.a.createElement("p",{className:"Info"},this.props.artist))))}}]),a}(r.a.Component)),S=function(){function e(){Object(i.a)(this,e)}return Object(o.a)(e,null,[{key:"generatePlaylistInfo",value:function(e){var t=[];return e.forEach((function(e){t.push({playlistId:e.id})})),t}},{key:"generateSongInfo",value:function(e){var t=[];return e.forEach((function(e){t.push({name:e.name,artist:e.artists[0].name,album:e.album.name,art:e.album.images[1].url,songId:e.id})})),t}}]),e}(),C=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleSubmit=function(e){e.preventDefault(),""!==n.state.searchQuery&&(n.setState({previousSearchQuery:n.state.searchQuery}),n.state.searchQuery!=n.state.previousSearchQuery&&n.waitForFetch())},n.waitForFetch=Object(b.a)(y.a.mark((function e(){var t,a,l;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return setTimeout((function(){n.setState({prompt:"Searching for results..."})}),1e3),e.next=3,w.fetchData(n.state.searchQuery,"search","track");case 3:for(t=e.sent,a=setTimeout((function(){}),0);a--;)window.clearTimeout(a),n.setState({prompt:null});if(n.setState({songListRaw:t}),0!==t.tracks.items.length){e.next=10;break}return n.setState({prompt:"No results found!",results:r.a.createElement("div",{className:"Margin"})}),e.abrupt("return");case 10:l=S.generateSongInfo(n.state.songListRaw.tracks.items),n.setState({simplifiedSongList:l}),n.setState({results:r.a.createElement("div",{className:"Cards"},n.populateGrid(n.state.simplifiedSongList))});case 13:case"end":return e.stop()}}),e)}))),n.state={token:"NO_TOKEN(CLIENT)",songListRaw:null,simplifiedSongList:null,searchQuery:"",previousSearchQuery:"",results:r.a.createElement("div",{className:"Margin"}),prompt:null},n.handleChange=n.handleChange.bind(Object(E.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(E.a)(n)),n.onCardClick=n.onCardClick.bind(Object(E.a)(n)),n}return Object(o.a)(a,[{key:"handleChange",value:function(e){this.setState({searchQuery:e.target.value})}},{key:"onCardClick",value:function(e,t,a,n,r){"song"===this.props.chain&&this.props.history.push({pathname:"/songs",search:e}),"playlist"===this.props.chain&&this.props.history.push({pathname:"/song-playlist",search:e,state:{name:t,album:a,artist:n,art:r}})}},{key:"populateGrid",value:function(e){if(null==e)return null;for(var t=[],a=0;a<e.length;a++){var n=e[a].name,l=e[a].album,s=e[a].artist,i=e[a].songId;e[a].name.length>30&&(n=e[a].name.substring(0,30)+"..."),e[a].album.length>20&&(l=e[a].album.substring(0,20)+"..."),e[a].artist.length>40&&(s=e[a].artist.substring(0,40)+"..."),t.push(r.a.createElement("p",{key:a,className:"Card-p"},r.a.createElement(k,{buttonClick:this.onCardClick.bind(this,i,n,l,s,e[a].art),name:n,album:l,artist:s,artwork:e[a].art,songId:i})))}return t}},{key:"render",value:function(){return r.a.createElement(h.a,null,r.a.createElement("div",{className:"Search"},r.a.createElement("header",{className:"Search-header"},r.a.createElement("img",{src:d.a,className:"Search-logo",alt:"logo"}),r.a.createElement("p",null,"Search for a song"),r.a.createElement("p",null,"or"),r.a.createElement("p",null,"Enter a Spotify song link"),r.a.createElement("div",{className:"searchbar"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("input",{className:"Search-box",type:"text",value:this.state.value,placeholder:"Search..",onChange:this.handleChange}),r.a.createElement("button",{id:"searchclick",type:"submit"},"Search"))),r.a.createElement("div",{style:{marginTop:"3vh",position:"absolute",top:"45vh"}},this.state.prompt)),r.a.createElement("div",{style:{marginTop:"4vh"}},this.state.results),r.a.createElement("div",{id:"footer",style:{height:"36.6vh"}})))}}]),a}(r.a.Component),T=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleSubmit=function(e){e.preventDefault(),""!==n.state.searchQuery&&(n.setState({previousSearchQuery:n.state.searchQuery}),n.state.searchQuery!=n.state.previousSearchQuery&&n.waitForFetch())},n.waitForFetch=Object(b.a)(y.a.mark((function e(){var t,a,l;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return setTimeout((function(){n.setState({prompt:"Searching for results..."})}),1e3),e.next=3,w.fetchData(n.state.searchQuery,"search","playlist");case 3:for(t=e.sent,a=setTimeout((function(){}),0);a--;)window.clearTimeout(a),n.setState({prompt:null});if(n.setState({playlistsRaw:t}),0!==t.playlists.items.length){e.next=10;break}return n.setState({prompt:"No results found!",results:r.a.createElement("div",{className:"Margin"})}),e.abrupt("return");case 10:l=S.generatePlaylistInfo(n.state.playlistsRaw.playlists.items),n.setState({playlistIds:l}),n.setState({results:r.a.createElement("div",{className:"Cards",style:{gridGap:"5vh"}},n.populateGrid(n.state.playlistIds))});case 13:case"end":return e.stop()}}),e)}))),n.state={token:"NO_TOKEN(CLIENT)",playlistsRaw:null,playlistIds:null,searchQuery:"",previousSearchQuery:"",results:r.a.createElement("div",{className:"Margin"}),prompt:null},n.handleChange=n.handleChange.bind(Object(E.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(E.a)(n)),n.onCardClick=n.onCardClick.bind(Object(E.a)(n)),n}return Object(o.a)(a,[{key:"handleChange",value:function(e){this.setState({searchQuery:e.target.value})}},{key:"onCardClick",value:function(e,t,a,n,r){this.props.history.push({pathname:"/playlists",search:this.props.location.search,hash:e,state:{name:t,album:a,artist:n,art:r}})}},{key:"populateGrid",value:function(e){if(null==e)return null;for(var t=[],a=0;a<e.length/2;a++){var n=e[a].playlistId;t.push(r.a.createElement("p",{className:"Playlist-p",key:a},r.a.createElement("h2",{onClick:this.onCardClick.bind(this,n,this.props.location.state.name,this.props.location.state.album,this.props.location.state.artist,this.props.location.state.art)},"Select Playlist"),r.a.createElement("p",{className:"Playlist-p"},r.a.createElement("iframe",{src:"https://open.spotify.com/embed/playlist/"+n,width:"350",height:"350",frameBorder:"0",allowTransparency:"true",allow:"encrypted-media"}))))}return t}},{key:"render",value:function(){return r.a.createElement(h.a,null,r.a.createElement("div",{className:"Search"},r.a.createElement("header",{className:"Search-header"},r.a.createElement("div",{className:"Grid"},r.a.createElement("div",null,r.a.createElement("p",null,r.a.createElement("img",{src:d.a,className:"Search-logo",alt:"logo"})),r.a.createElement("p",null,"Search for a playlist"),r.a.createElement("p",null,"or"),r.a.createElement("p",null,"Enter a Spotify playlist link"),r.a.createElement("p",null),r.a.createElement("div",{className:"searchbar"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("input",{className:"Search-box",type:"text",value:this.state.value,placeholder:"Search..",onChange:this.handleChange}),r.a.createElement("button",{id:"searchclick",type:"submit"},"Search")))),r.a.createElement("div",null,r.a.createElement("p",null,"Song being analysed:"),r.a.createElement("p",{className:"Card-p"},r.a.createElement(k,{name:this.props.location.state.name,album:this.props.location.state.album,artist:this.props.location.state.artist,artwork:this.props.location.state.art,songId:this.props.location.state.songId})))),r.a.createElement("div",{style:{marginTop:"3vh",position:"absolute",top:"45vh"}},this.state.prompt)),this.state.results,r.a.createElement("div",{id:"footer",style:{height:"36.6vh"}})))}}]),a}(r.a.Component),j=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,"About ",this.props.search)}}]),a}(r.a.Component),x=(a(152),a(37)),O=a(72),N=a(312),D=a(69),I=a(131),A=a.n(I),F=a(66),M=a.n(F),L=a(67),R=(a(284),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"background"},r.a.createElement("svg",{viewBox:"0 0 1920 2140",style:{top:this.props.shiftDown}},r.a.createElement("path",{fill:this.props.fill,d:"M 0.00,1811.00 C 0.00,1811.00 0.00,1214.00 0.00,1214.00 0.00,1214.00 0.99,1206.61 0.99,1206.61 0.99,1206.61 9.00,1201.00 9.00,1201.00 9.00,1201.00 25.00,1191.20 25.00,1191.20 25.00,1191.20 107.00,1141.20 107.00,1141.20 107.00,1141.20 449.00,932.80 449.00,932.80 449.00,932.80 726.00,763.81 726.00,763.81 726.00,763.81 1059.00,560.81 1059.00,560.81 1059.00,560.81 1328.00,396.81 1328.00,396.81 1328.00,396.81 1450.00,322.58 1450.00,322.58 1450.00,322.58 1595.00,234.19 1595.00,234.19 1595.00,234.19 1776.00,123.80 1776.00,123.80 1776.00,123.80 1875.00,63.40 1875.00,63.40 1875.00,63.40 1904.00,45.80 1904.00,45.80 1904.00,45.80 1920.00,37.00 1920.00,37.00 1920.00,37.00 1920.00,633.00 1920.00,633.00 1920.00,633.00 1918.98,640.82 1918.98,640.82 1918.98,640.82 1911.00,647.00 1911.00,647.00 1911.00,647.00 1895.00,656.80 1895.00,656.80 1895.00,656.80 1814.00,706.05 1814.00,706.05 1814.00,706.05 1670.00,793.81 1670.00,793.81 1670.00,793.81 1470.00,915.80 1470.00,915.80 1470.00,915.80 1271.00,1037.19 1271.00,1037.19 1271.00,1037.19 961.00,1226.19 961.00,1226.19 961.00,1226.19 628.00,1429.19 628.00,1429.19 628.00,1429.19 465.00,1528.42 465.00,1528.42 465.00,1528.42 155.00,1717.42 155.00,1717.42 155.00,1717.42 51.00,1780.81 51.00,1780.81 51.00,1780.81 18.00,1801.00 18.00,1801.00 18.00,1801.00 0.00,1811.00 0.00,1811.00 Z"})))}}]),a}(r.a.Component)),_=a(133),B=function e(){Object(i.a)(this,e)};B.RGB_Linear_Shade=function(e,t){var a=parseInt,n=Math.round,r=t.split(","),l=Object(_.a)(r,4),s=l[0],i=l[1],o=(t=l[2],l[3]),c=(u=e<0)?0:255*e,u=u?1+e:1-e;return"rgb"+(o?"a(":"(")+n(a("a"==s[3]?s.slice(5):s.slice(4))*u+c)+","+n(a(i)*u+c)+","+n(a(t)*u+c)+(o?","+o:")")};var P=B,G=Object(D.a)((function(e){return{tooltip:{backgroundColor:e.palette.common.white,color:"rgba(0, 0, 0, 0.87)",boxShadow:e.shadows[1],lineHeight:"25px",textAlign:"center"},arrow:{color:e.palette.common.white}}}))(N.a),H=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).componentDidMount=Object(b.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.waitForFeatures();case 2:return e.next=4,n.waitFortrack();case 4:return e.next=6,n.waitForAlbum();case 6:n.generateCharts(),n.setBgColours();case 8:case"end":return e.stop()}}),e)}))),n.waitFortrack=Object(b.a)(y.a.mark((function e(){var t,a,l,s;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.location.search,e.next=3,w.fetchData(t.substring(1,t.length),"analysis","tracks/");case 3:if(0!==(a=e.sent).length){e.next=7;break}return n.setState({prompt:"Invalid song ID",invalid:!0}),e.abrupt("return");case 7:return n.setState({rawTrack:a,embedAlbum:r.a.createElement("iframe",{src:"https://open.spotify.com/embed/album/"+a.album.id,width:"350",height:"350",frameBorder:"0",allowTransparency:"true",allow:"encrypted-media"})}),e.next=10,fetch("/api/songSort/truncate",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(a)});case 10:return l=e.sent,e.next=13,l.json();case 13:s=e.sent,n.setState({songCard:r.a.createElement(k,{name:s.name,album:s.album,artist:s.artist,artwork:n.state.rawTrack.album.images[1].url}),explicit:s.expl,artists:s.artists});case 15:case"end":return e.stop()}}),e)}))),n.waitForFeatures=Object(b.a)(y.a.mark((function e(){var t,a,r,l;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.location.search,e.next=3,w.fetchData(t.substring(1,t.length),"analysis","audio-features/");case 3:if(0!==(a=e.sent).length){e.next=7;break}return n.setState({prompt:"Invalid song ID",invalid:!0}),e.abrupt("return");case 7:return e.next=9,fetch("/api/songSort/sortFeatures",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(a)});case 9:return r=e.sent,e.next=12,r.json();case 12:l=e.sent,n.setState({rawFeatures:a,live:l.live,acoustic:l.acoustic,instrumental:l.instrumental,musicality:l.musicality,key:l.key}),1===a.mode?n.setState({modality:"Major"}):0===a.mode&&n.setState({modality:"Minor"});case 15:case"end":return e.stop()}}),e)}))),n.waitForAlbum=Object(b.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==n.state.invalid){e.next=2;break}return e.abrupt("return");case 2:return n.props.location.search,e.next=5,w.fetchData(n.state.rawTrack.album.id,"analysis","albums/");case 5:if(0!==(t=e.sent).length){e.next=9;break}return n.setState({prompt:"Invalid song ID",invalid:!0}),e.abrupt("return");case 9:console.log(t),n.setState({rawAlbum:t});case 11:case"end":return e.stop()}}),e)}))),n.generateCharts=Object(b.a)(y.a.mark((function e(){var t,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/songSort/generateChart",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n.state.rawFeatures)});case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,n.setState(a);case 7:case"end":return e.stop()}}),e)}))),n.state={rawFeatures:[],rawAnalysis:[],rawTrack:{album:{id:"null"},available_markets:[]},rawAlbum:[],data:[],options:[],prompt:null,invalid:!1,modality:"",songCard:null,bgImage:null,explicit:null,live:null,instrumental:null,musicality:null,key:null,artists:null,albumColours1:"white",albumColours2:"white",albumColours3:"white",albumColours4:"white",embedAlbum:null},n}return Object(o.a)(a,[{key:"setBgColours",value:function(){var e=document.querySelector("img");e.crossOrigin="Anonymous";var t=new M.a;e.addEventListener("load",function(){var a=this;t.getColor(e);L.from(e).getPalette().then((function(e){console.log(e);var t=e.Vibrant.getRgb(),n=e.DarkVibrant.getRgb(),r=e.DarkMuted.getRgb(),l=e.Muted.getRgb();t=P.RGB_Linear_Shade(.3,"rgb("+t[0]+","+t[1]+","+t[2]+")"),n=P.RGB_Linear_Shade(.3,"rgb("+n[0]+","+n[1]+","+n[2]+")"),r=P.RGB_Linear_Shade(.3,"rgb("+r[0]+","+r[1]+","+r[2]+")"),l=P.RGB_Linear_Shade(.3,"rgb("+l[0]+","+l[1]+","+l[2]+")"),a.setState({albumColours1:t,albumColours2:n,albumColours3:r,albumColours4:l})}))}.bind(this))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"Main",style:{backgroundColor:this.state.albumColours1}},r.a.createElement("div",{style:{width:"1vw",marginLeft:"-1vw"}},r.a.createElement(R,{fill:this.state.albumColours2}),r.a.createElement(R,{fill:this.state.albumColours3,shiftDown:"-100vh"}),r.a.createElement(R,{fill:this.state.albumColours4,shiftDown:"100vh"}),r.a.createElement(R,{fill:this.state.albumColours2,shiftDown:"200vh"})),r.a.createElement("div",{className:"Header"},r.a.createElement("p",null,"Song Analysis"),r.a.createElement("p",{id:"Song-card"},this.state.songCard)),r.a.createElement("div",{className:"Container"},r.a.createElement("div",{style:{display:"flex",fontSize:"2.5vh",padding:"1vh",textAlign:"left",paddingLeft:"3vh",alignContent:"left"}},r.a.createElement(A.a,{style:{paddingRight:"0.3vw"}})," Hover over an item for more information."),r.a.createElement("div",null,r.a.createElement("h2",null,"Song Mood Features:",r.a.createElement("button",{style:{display:"flex",marginLeft:"2vw"}},"What's this?")),r.a.createElement("hr",null),r.a.createElement("p",null,r.a.createElement(x.b,{className:"Chart",data:this.state.data,options:this.state.options}))),r.a.createElement("div",null,r.a.createElement("h2",{style:{marginBottom:"0vh"}},"Musical information:"),r.a.createElement("p",{style:{fontSize:"1.9vh",marginLeft:"2vh"}}),r.a.createElement("hr",null),r.a.createElement(G,{arrow:"true",enterTouchDelay:"100",title:r.a.createElement("p",{className:"Tooltip"},"Tempo of the song in beats per minute.")},r.a.createElement("p",null,"Tempo: ",Math.round(this.state.rawFeatures.tempo)," bpm")),r.a.createElement("hr",null),r.a.createElement(G,{arrow:"true",enterTouchDelay:"100",title:r.a.createElement("p",{className:"Tooltip"},"Time signature of the song.")},r.a.createElement("p",null,"Time signature: ",this.state.rawFeatures.time_signature,"/4")),r.a.createElement("hr",null),r.a.createElement(G,{arrow:"true",enterTouchDelay:"100",title:r.a.createElement("p",{className:"Tooltip"},"Musical key of the song.")},r.a.createElement("p",null,"Key: ",this.state.key)),r.a.createElement("hr",null),r.a.createElement(G,{arrow:"true",enterTouchDelay:"100",title:r.a.createElement("p",{className:"Tooltip"},"Modality of the song (Major or Minor).")},r.a.createElement("p",null,"Modality: ",this.state.modality)),r.a.createElement("hr",null),r.a.createElement(G,{arrow:"true",enterTouchDelay:"100",title:r.a.createElement("p",{className:"Tooltip"},"Whether the song is acoustic or not. Spotify gives songs an 'Acousticness' rating on a scale of 0.0 - 1.0. The closer to 1.0 this value is, the higher the probability that the track is acoustic. The Acousticness rating for this track is ",this.state.rawFeatures.acousticness,".")},r.a.createElement("p",null,"Acoustic: ",this.state.acoustic)),r.a.createElement("hr",null),r.a.createElement(G,{arrow:"true",enterTouchDelay:"100",title:r.a.createElement("p",{className:"Tooltip"},"Whether the song is instrumental, or contains vocals. 'Instrumentalness' is given on a scale of 0.0 - 1.0. The closer to 1.0 this value is, the higher the probability that the track is purely instrumental. The 'Instrumentalness' rating for this song is ",this.state.rawFeatures.liveness,".")},r.a.createElement("p",null,"Instrumental: ",this.state.instrumental)),r.a.createElement("hr",null),r.a.createElement(G,{arrow:"true",enterTouchDelay:"100",title:r.a.createElement("p",{className:"Tooltip"},'The musicality of a song is a measure of whether it contains music or people talking. \'Speechiness\' is given on a scale of 0.0 - 0.1, and songs with high Speechiness are less musical and contain more spoken words. For example, a podcast would have a \'Speechiness\' value greater than 0.66, and a normal song containing singing would have a value below 0.33. Rap and poetry fall somewhere in the middle. The possibilities for Musicality are "Musical", "Musical and spoken", or "Spoken word". This track has a Speechiness value of ',this.state.rawFeatures.speechiness,".")},r.a.createElement("p",null,"Musicality: ",this.state.musicality)),r.a.createElement("hr",null)),r.a.createElement("div",null,r.a.createElement("h2",null,"Song details:"),r.a.createElement("hr",null),r.a.createElement(G,{arrow:"true",enterTouchDelay:"100",title:r.a.createElement("p",{className:"Tooltip"},"The name of the song.")},r.a.createElement("p",null,"Name: ",this.state.rawTrack.name)),r.a.createElement("hr",null),r.a.createElement(G,{arrow:"true",enterTouchDelay:"100",title:r.a.createElement("p",{className:"Tooltip"},"All artists who created and collaborated on the song.")},r.a.createElement("p",null,"Artists: ",this.state.artists)),r.a.createElement("hr",null),r.a.createElement(G,{arrow:"true",enterTouchDelay:"100",title:r.a.createElement("p",{className:"Tooltip"},"Whether the lyrics contain explicit content or not..")},r.a.createElement("p",null,"Explicit lyrics: ",this.state.explicit)),r.a.createElement("hr",null),r.a.createElement(G,{arrow:"true",enterTouchDelay:"100",title:r.a.createElement("p",{className:"Tooltip"},"How popular the song is. This is a number between 0 and 100, with 100 being the most popular. Popularity is based on the total number of recent plays, meaning songs which were popular in the past might now have a low popularity rating. The popularity is relative, with the most popular song on Spotify having a popularity of 100, so songs with popularity ratings that seem quite low may actually be relatively popular.")},r.a.createElement("p",null,"Popularity: ",this.state.rawTrack.popularity)),r.a.createElement("hr",null),r.a.createElement(G,{arrow:"true",enterTouchDelay:"100",title:r.a.createElement("p",{className:"Tooltip"},"Length of the song.")},r.a.createElement("p",null,"Length: ",(this.state.rawFeatures.duration_ms/1e3/60).toFixed(2)," minutes")),r.a.createElement("hr",null),r.a.createElement(G,{arrow:"true",enterTouchDelay:"100",title:r.a.createElement("p",{className:"Tooltip"},"Whether the song is live or not. This is determined by the amount of 'audience noise' detected in the recording, on a scale of 0.0 - 1.0. The 'Liveness' rating for this track is ",this.state.rawFeatures.liveness,".")},r.a.createElement("p",null,"Live: ",this.state.live)),r.a.createElement("hr",null)),r.a.createElement("div",{style:{paddingBottom:"0vh",marginBottom:"0vh"}},r.a.createElement("h2",null,"Album preview:"),r.a.createElement("hr",null),this.state.embedAlbum),r.a.createElement("div",null,r.a.createElement("h2",null,"Album details:"),r.a.createElement("hr",null),r.a.createElement("p",null,"Name: ",this.state.rawAlbum.name),r.a.createElement("hr",null),r.a.createElement("p",null,"Release date: ",this.state.rawAlbum.release_date),r.a.createElement("hr",null),r.a.createElement("p",null,"Popularity: ",this.state.rawAlbum.popularity),r.a.createElement("hr",null),r.a.createElement("p",null,"Type: ",this.state.rawAlbum.album_type),r.a.createElement("hr",null),r.a.createElement("p",null,"Record label: ",this.state.rawAlbum.label),r.a.createElement("hr",null)),r.a.createElement("div",null,r.a.createElement("h2",null,"Available regions:"),r.a.createElement("hr",null),r.a.createElement("p",{style:{justifyContent:"center",display:"flex"}},r.a.createElement(O.ComposableMap,{style:{color:"white",height:"42vh",marginRight:"2vw"}},r.a.createElement(O.Geographies,{geography:"https://raw.githubusercontent.com/zcreativelabs/react-simple-maps/master/topojson-maps/world-110m.json"},(function(t){return t.geographies.map((function(t){var a=e.state.rawTrack.available_markets.find((function(e){return e===t.properties.ISO_A2}));return r.a.createElement(O.Geography,{key:t.rsmKey,geography:t,fill:a?"darkred":"white"})}))}))))),r.a.createElement("div",null,r.a.createElement("h2",null,"Mood features explained:"),r.a.createElement("hr",null),r.a.createElement("p",null,"All mood feature data is taken from Spotify, who use algorithms to calculate the numbers shown."),r.a.createElement("h2",null,"Energy"),r.a.createElement("p",null,"The 'Energy' of a song determines how energetic the song feels, and is a measure of intensity and musical activity, with energetic tracks feeling fast, busy and noisy. Energy is calculated by taking into account the dynamic range, the loudness, the timbre, and the onset rate (rate of notes played). Energy is determined on a scale of 0 - 10, with 10 being the most energetic."),r.a.createElement("h2",null,"Danceability"),r.a.createElement("p",null,"The 'Danceability' of a song describes how good a track is to dance to. This takes into account a number of musical elements including tempo, how stable the rhythm is, the strength of each beat, and how regular the musical pattern is. Dancibility is determined on a scale of 0 - 10, with 10 being the most danceable."),r.a.createElement("h2",null,"Happiness"),r.a.createElement("p",null,"The happiness or 'Valence' of a song is how positive it sounds. Tracks with high valence sound more positive (happy, cheerful, euphoric) while tracks with low valence sound more negative (sad, depressed, angry). Happiness is determined on a scale of 0 - 10, with 10 being the most positive sounding."))))}}]),a}(r.a.Component),Q=(a(286),a(132)),J=a.n(Q),V=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).generateChart=Object(b.a)(y.a.mark((function t(){var a,n,l;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={data:e.props.data,songIndex:e.props.songIndex},t.next=3,fetch("/api/plSort/generateHistogram",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(a)});case 3:return n=t.sent,t.next=6,n.json();case 6:l=t.sent,console.log(l),e.setState({histogram:r.a.createElement(x.a,{className:"Chart",data:l.chartData,options:l.chartOptions})});case 9:case"end":return t.stop()}}),t)}))),e.state={histogram:null},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.generateChart()}},{key:"render",value:function(){return this.state.histogram}}]),a}(r.a.Component),z=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).waitFortracks=Object(b.a)(y.a.mark((function t(){var a,n,l,s,i,o,c,u;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.fetchData("","analysis","playlists/"+e.props.location.hash.substring(1,e.props.location.hash.length)+"/tracks");case 2:return a=t.sent,n="",l=0,a.items.forEach((function(e){100!==++l&&null!==e.track&&(n+=e.track.id+",")})),n=n.substring(0,n.length-1),t.next=9,w.fetchData(e.props.location.search.substring(1,e.props.location.search.length)+","+n,"analysis","audio-features/?ids=");case 9:if(0!==(s=t.sent).length){t.next=13;break}return e.setState({prompt:"Invalid ID",invalid:!0}),t.abrupt("return");case 13:return e.setBgColours(),t.next=16,fetch("/api/plSort",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(s)});case 16:return i=t.sent,t.next=19,i.json();case 19:return o=t.sent,t.next=22,fetch("/api/plFit/web",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(o.score)});case 22:return c=t.sent,t.next=25,c.json();case 25:u=t.sent,e.setState({score:o.score,featureInfo1:o.featureInfo1,featureInfo2:o.featureInfo2,featureInfoColour:o.featureInfoColour,fit:o.simplify.fit,danceHist:r.a.createElement(V,{data:o.simplify.datasets.dance,songIndex:o.simplify.index.danceIndex}),energyHist:r.a.createElement(V,{data:o.simplify.datasets.energy,songIndex:o.simplify.index.energyIndex}),valenceHist:r.a.createElement(V,{data:o.simplify.datasets.valence,songIndex:o.simplify.index.valenceIndex}),chartData:u.chartData,chartOptions:u.chartOptions});case 27:case"end":return t.stop()}}),t)}))),e.state={danceHist:null,energyHist:null,valenceHist:null,score:[],chartData:[],chartOptions:[],featureInfo1:[],featureInfo2:[],featureInfoColour:[],errorVis:"hidden",fit:{stDevs:[0,0,0],sigmas:[0,0,0]},albumColours1:"white",albumColours2:"white",albumColours3:"white",albumColours4:"white"},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.waitFortracks()}},{key:"setBgColours",value:function(){var e=document.querySelector("img");e.crossOrigin="Anonymous";var t=new M.a;e.addEventListener("load",function(){var a=this;t.getColor(e);L.from(e).getPalette().then((function(e){var t=e.Vibrant.getRgb(),n=e.DarkVibrant.getRgb(),r=e.DarkMuted.getRgb(),l=e.Muted.getRgb();t=P.RGB_Linear_Shade(.3,"rgb("+t[0]+","+t[1]+","+t[2]+")"),n=P.RGB_Linear_Shade(.3,"rgb("+n[0]+","+n[1]+","+n[2]+")"),r=P.RGB_Linear_Shade(.3,"rgb("+r[0]+","+r[1]+","+r[2]+")"),l=P.RGB_Linear_Shade(.3,"rgb("+l[0]+","+l[1]+","+l[2]+")"),a.setState({albumColours1:t,albumColours2:n,albumColours3:r,albumColours4:l})}))}.bind(this))}},{key:"render",value:function(){return r.a.createElement("div",{className:"Main-play",style:{backgroundColor:this.state.albumColours1}},r.a.createElement("div",{style:{width:"1vw",marginLeft:"-1vw"}},r.a.createElement(R,{fill:this.state.albumColours2}),r.a.createElement(R,{fill:this.state.albumColours3,shiftDown:"-100vh"}),r.a.createElement(R,{fill:this.state.albumColours4,shiftDown:"100vh"}),r.a.createElement(R,{fill:this.state.albumColours2,shiftDown:"200vh"})),r.a.createElement("div",null,r.a.createElement("div",{className:"Container-play"},r.a.createElement("div",{style:{display:"flex",margin:"0vh",fontSize:"2.5vh",padding:"0vh",textAlign:"left",paddingLeft:"3vh",alignContent:"left",color:"red",visibility:this.state.errorVis}},r.a.createElement(J.a,{style:{paddingRight:"0.3vw"}}),"This playlist has less than 20 songs. Choose a playlist with more songs for a more accurate analysis."),r.a.createElement("div",null,r.a.createElement("h2",null,this.props.location.state.name),r.a.createElement("h2",null,this.props.location.state.artist),r.a.createElement("p",null),r.a.createElement("p",{style:{backgroundColor:"white",padding:"0vh",paddingLeft:"0.25vw",margin:"1vw"}},r.a.createElement(x.b,{data:this.state.chartData,options:this.state.chartOptions,height:"60vh"})),r.a.createElement("p",null,r.a.createElement("p",{style:{fontSize:"6vh"}},Math.round(this.state.score/12*100),"% Fit!"))),r.a.createElement("div",{style:{margin:"0hv",padding:"0vh",justifyContent:"center",display:"flex"}},r.a.createElement("p",null,r.a.createElement("img",{src:this.props.location.state.art,style:{margin:"2vh",height:"auto",width:"45vh",border:"0.3vh solid dimgrey"}}))),r.a.createElement("div",{className:"Chart-play"},r.a.createElement("p",null,this.state.danceHist)),r.a.createElement("div",null,r.a.createElement("h2",null,"Danceability:",r.a.createElement("p",{style:{color:this.state.featureInfoColour[0],margin:"0vh",padding:"1vh"}},this.state.featureInfo1[0])),r.a.createElement("hr",null),r.a.createElement("p",null,this.state.featureInfo2[0])),r.a.createElement("div",null,r.a.createElement("p",null,this.state.energyHist)),r.a.createElement("div",null,r.a.createElement("h2",null,"Energy:",r.a.createElement("p",{style:{color:this.state.featureInfoColour[1],margin:"0vh",padding:"1vh"}},this.state.featureInfo1[1])),r.a.createElement("hr",null),r.a.createElement("p",null,this.state.featureInfo2[1])),r.a.createElement("div",null,r.a.createElement("p",null,this.state.valenceHist)),r.a.createElement("div",null,r.a.createElement("h2",null,"Positivity:",r.a.createElement("p",{style:{color:this.state.featureInfoColour[2],margin:"0vh",padding:"1vh"}},this.state.featureInfo1[2])),r.a.createElement("hr",null),r.a.createElement("p",null,this.state.featureInfo2[2])),r.a.createElement("div",{id:"Detail"},r.a.createElement("h2",null,"Mood features explained:"),r.a.createElement("hr",null),r.a.createElement("p",null,"All mood feature data is taken from Spotify, who use algorithms to calculate the numbers shown."),r.a.createElement("h2",null,"Energy"),r.a.createElement("p",null,"The 'Energy' of a song determines how energetic the song feels, and is a measure of intensity and musical activity, with energetic tracks feeling fast, busy and noisy. Energy is calculated by taking into account the dynamic range, the loudness, the timbre, and the onset rate (rate of notes played). Energy is determined on a scale of 0 - 10, with 10 being the most energetic."),r.a.createElement("p",null,"The standard deviation of Energy values for the songs in this playlist is ",this.state.fit.stDevs[1].toFixed(3),". The Energy of your song falls within ",this.state.fit.sigmas[1]," \u03c3 (sigma) of the distribution."),r.a.createElement("h2",null,"Danceability"),r.a.createElement("p",null,"The 'Danceability' of a song describes how good a track is to dance to. This takes into account a number of musical elements including tempo, how stable the rhythm is, the strength of each beat, and how regular the musical pattern is. Dancibility is determined on a scale of 0 - 10, with 10 being the most danceable."),r.a.createElement("p",null,"The standard deviation of Danceability values for the songs in this playlist is ",this.state.fit.stDevs[0].toFixed(3),". The danceability of your song falls within ",this.state.fit.sigmas[0]," \u03c3 (sigma) of the distribution."),r.a.createElement("h2",null,"Happiness"),r.a.createElement("p",null,"The happiness or 'Valence' of a song is how positive it sounds. Tracks with high valence sound more positive (happy, cheerful, euphoric) while tracks with low valence sound more negative (sad, depressed, angry). Happiness is determined on a scale of 0 - 10, with 10 being the most positive sounding."),r.a.createElement("p",null,"The standard deviation of Positivity values for the songs in this playlist is ",this.state.fit.stDevs[2].toFixed(3),". The Positivity of your song falls within ",this.state.fit.sigmas[2]," \u03c3 (sigma) of the distribution.")))))}}]),a}(r.a.Component),W=(a(287),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.call(this)}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement(h.a,null,r.a.createElement("nav",{className:"Navbar"},r.a.createElement("ul",null,r.a.createElement("li",{style:{float:"left",fontSize:"3vh"}},r.a.createElement(h.b,{to:"/"},"SongMap")),r.a.createElement("li",null,r.a.createElement(h.b,{to:"/about"},"About")),r.a.createElement("li",null,r.a.createElement(h.b,{to:"/contact"},"Contact")),r.a.createElement("li",null,r.a.createElement(h.b,{to:"/playlist"},"Playlist Analyser")),r.a.createElement("li",null,r.a.createElement(h.b,{to:"/song"},"Song Analyser")))),r.a.createElement(m.c,null,r.a.createElement(m.a,{path:"/",exact:!0,component:f}),r.a.createElement(m.a,{path:"/songs",component:H}),r.a.createElement(m.a,{path:"/playlists",component:z}),r.a.createElement(m.a,{path:"/song-playlist",component:T}),r.a.createElement(m.a,{path:"/about",component:j}),r.a.createElement(m.a,{path:"/song",render:function(e){return r.a.createElement(C,Object.assign({},e,{chain:"song"}))}}),r.a.createElement(m.a,{path:"/playlist",render:function(e){return r.a.createElement(C,Object.assign({},e,{chain:"playlist"}))}})))}}]),a}(r.a.Component));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(W,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},36:function(e,t,a){e.exports=a.p+"static/media/hellify.aede5c89.png"},98:function(e,t,a){}},[[139,1,2]]]);
//# sourceMappingURL=main.4208a7e1.chunk.js.map