{"version":3,"sources":["components/FetchSearchData.js","components/SongCard.js","routes/SongSearchPage.js","serviceWorker.js","routes/HomePage.js","routes/PlaylistSearchPage.js","routes/SongPage.js","routes/PlaylistPage.js","routes/AboutPage.js","components/FetchTrackFeatures.js","components/BackgroundSvgPaths.js","routes/SongResultsPage.js","components/Histogram.js","routes/PlaylistResultsPage.js","App.js","index.js","hellify.png"],"names":["FetchSearchData","fetchData","searchQuery","searchType","a","data","getToken","fetch","response","json","body","status","Error","message","requestToken","token","myToken","myOptions","headers","Authorization","replace","console","log","url","SongCard","className","onClick","this","props","buttonClick","rowSpan","src","artwork","alt","name","album","artist","React","Component","SongSearchPage","handleSubmit","event","preventDefault","state","setState","previousSearchQuery","waitForFetch","setTimeout","prompt","id","window","clearTimeout","songListRaw","tracks","items","length","results","generateSongInfo","populateGrid","simplifiedSongList","handleChange","bind","onCardClick","target","value","songId","art","chain","history","push","pathname","search","songs","forEach","song","artists","images","cardGrid","i","substring","key","hellify","onSubmit","type","placeholder","onChange","style","marginTop","position","top","height","Boolean","location","hostname","match","HomePage","display","justifyContent","margin","to","PlaylistSearchPage","playlistsRaw","playlists","generatePlaylistInfo","gridGap","playlistIds","playlistId","hash","playlist","plId","width","frameBorder","allowTransparency","allow","AboutPage","FetchTrackFeatures","BackgroundSvgPaths","viewBox","shiftDown","fill","d","LightTooltip","withStyles","theme","tooltip","backgroundColor","palette","common","white","color","boxShadow","shadows","lineHeight","textAlign","arrow","Tooltip","RGB_Linear_Shade","p","c","parseInt","r","Math","round","split","b","t","P","slice","SongResultsPage","componentDidMount","waitForFeatures","waitForAnalysis","waitFortrack","waitForAlbum","generateSongFeatures","setBgColours","invalid","rawTrack","expl","explicit","songCard","live","liveness","acoustic","acousticness","instrumental","instrumentalness","musicality","speechiness","rawFeatures","mode","modality","rawAnalysis","rawAlbum","available_markets","options","bgImage","albumColours1","albumColours2","albumColours3","albumColours4","img","document","querySelector","crossOrigin","colorThief","ColorThief","addEventListener","getColor","Vibrant","getPalette","then","rgb1","getRgb","rgb2","DarkVibrant","rgb3","DarkMuted","rgb4","Muted","chartData","labels","datasets","label","borderColor","danceability","toFixed","energy","valence","tooltips","callbacks","title","tooltipItem","titleFontSize","titleFontColor","bodyFontColor","bodyFontSize","displayColors","legend","fontColor","scales","yAxes","ticks","gridLines","drawBorder","xAxes","barPercentage","fontSize","min","max","stepSize","marginLeft","padding","paddingLeft","alignContent","paddingRight","marginBottom","enterTouchDelay","tempo","time_signature","popularity","duration_ms","paddingBottom","release_date","album_type","marginRight","geography","geographies","map","geo","find","s","properties","ISO_A2","rsmKey","Histogram","generateChart","categoryPercentage","songIndex","autoSkip","PlaylistResultsPage","waitFortracks","plTracks","plTrackIds","n","track","featureData","simplifyData","fit","scores","featureInfo1","featureInfo2","featureInfoColour","feat","sigmas","stDevs","totalScore","reduce","score","generateScoreChart","dance","danceArray","energyArray","valenceArray","danceIndex","energyIndex","valenceIndex","audio_features","findIndex","val","errorVis","values","means","sqrt","x","pow","danceHist","energyHist","valenceHist","chartOptions","visibility","border","App","float","href","path","exact","component","render","ReactDOM","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error","module","exports"],"mappings":"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","file":"static/js/main.e731199b.chunk.js","sourcesContent":["class FetchSearchData {\n    /**\n     * Calls Spotify API using token. Takes a search query string and a string\n     * for search type (track, artist, playlist etc).\n     * @returns {Promise<void>}\n     */\n    static fetchData = async (searchQuery, searchType) => {\n        let data = '';\n        /**\n         * Calls my node server which requests a Spotify client access token.\n         * @returns {Promise<any>} Json body containing Spotify client token and test message\n         */\n        const getToken = async () => {\n            const response = await fetch('/authenticate');\n            const body = await response.json();\n\n            if (response.status !== 200) {\n                throw Error(body.message)\n            }\n            return body;\n        };\n        const requestToken = await getToken();\n        const token = requestToken.myToken;\n        var myOptions = {\n            headers: {\n                Authorization: 'Bearer ' + token\n            }\n        }\n        // Replaces special characters in query:\n        searchQuery = searchQuery.replace(/\\\\|#|%|{|}|\\^|\\||`/g, \"\")\n        console.log(searchQuery)\n        const endpoint = 'https://api.spotify.com/v1/search?';\n        const query = 'q=' + searchQuery;\n        const type = '&type=' + searchType;\n        const url = endpoint + query + type;\n\n        const response = await fetch(url, myOptions)\n        data = await response.json();\n        console.log(data);\n        return data;\n    }\n}\n\nexport default FetchSearchData;","import React from 'react';\nimport '../styles/SongCard.css';\n\nclass SongCard extends React.Component {\n    onCardClick() {\n        //console.log(this.props.name)\n    }\n\n    render() {\n        return (\n            <div className=\"Result-card\" onClick={this.props.buttonClick}>\n                <table className=\"Card-table\">\n                    <tr className=\"Class-row\">\n                        <td rowSpan=\"0\" className=\"Col-art\">\n                            <img className=\"Album-art\" src={this.props.artwork} alt=\"album artwork\"></img>\n                        </td>\n                        <div>\n                        </div>\n                        <td className=\"Song-info\">\n                            <div className=\"Info-name\" >{this.props.name}</div>\n                            <div className=\"Info\" >{this.props.album}</div>\n                            <div className=\"Info\">{this.props.artist}</div>\n                        </td>\n                    </tr>\n                </table>\n            </div>\n        );\n    }\n\n}\n\nexport default SongCard;","import React from 'react';\nimport hellify from '../hellify.png';\nimport '../styles/SearchPage.css';\nimport { BrowserRouter as Router, Route } from 'react-router-dom';\nimport FetchSearchData from '../components/FetchSearchData';\nimport SongCard from \"../components/SongCard\";\n\nclass SongSearchPage extends React.Component {\n  /**\n   * Default constructor for main app.\n   * @param props\n   */\n  constructor(props) {\n    super(props);\n    this.state = {\n      token: 'NO_TOKEN(CLIENT)',\n      songListRaw: null,\n      simplifiedSongList: null,\n      searchQuery: '',\n      previousSearchQuery: '',\n      results: <div className=\"Margin\" ></div>,\n      prompt: null\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.onCardClick = this.onCardClick.bind(this);\n  }\n\n  /**\n   * Updates the state {searchQuery} whenever a letter is typed in the search box.\n   * @param onChange event for search box input\n   */\n  handleChange(event) {\n    this.setState({ searchQuery: event.target.value });\n  }\n\n  /**\n   * Handles submit of search query.\n   * @param onSubmit event for search submit.\n   */\n  handleSubmit = event => {\n    event.preventDefault();\n    // Don't fetch if there is no query:\n    if (this.state.searchQuery === \"\") {\n      return;\n    }\n    this.setState({previousSearchQuery: this.state.searchQuery})\n    if (this.state.searchQuery == this.state.previousSearchQuery) {\n      return\n    }\n\n    this.waitForFetch();\n  }\n\n  waitForFetch = async () => {\n    // Set timeout for 'searching' message to appear:\n    setTimeout(() => {\n      this.setState({\n        prompt: \"Searching for results...\"\n      });\n    }, 1000);\n    const data = await FetchSearchData.fetchData(this.state.searchQuery, 'track');\n    // Clear all timeouts (as search is complete):\n    let id = setTimeout(function() {}, 0);\n    while (id--) {\n      window.clearTimeout(id);\n      this.setState({\n        prompt: null\n      });\n    }\n    this.setState({songListRaw: data})\n    // Error handling if no search results are returned:\n    if (data.tracks.items.length === 0) {\n      this.setState({\n        prompt: \"No results found!\",\n        results: <div className=\"Margin\" ></div>\n      });\n      return;\n    }\n    this.generateSongInfo();\n    this.setState({\n      results:\n          <div className=\"Cards\" >\n            {this.populateGrid(this.state.simplifiedSongList)}\n          </div>\n    })\n  };\n\n  /**\n   * When a song card is clicked, redirect to the results page passing the song id as the react router\n   * history object prop 'props.location.search'.\n   * @param songId\n   */\n  onCardClick(songId, name, album, artist, art) {\n    console.log(\"Click successful!! ID: \" + songId)\n    if (this.props.chain === \"song\") {\n      this.props.history.push({\n        pathname: '/songs',\n        search: songId\n      });\n    }\n    if (this.props.chain === \"playlist\") {\n      this.props.history.push({\n        pathname: '/song-playlist',\n        search: songId,\n        state: {\n          name: name,\n          album: album,\n          artist: artist,\n          art: art\n        }\n      });\n    }\n  }\n\n  generateSongInfo() {\n    const songs = []\n\n    this.state.songListRaw.tracks.items.forEach(song => {\n          songs.push({\n            name: song.name,\n            artist: song.artists[0].name,\n            album: song.album.name,\n            art: song.album.images[1].url,\n            songId: song.id\n          });\n        }\n    );\n    this.setState({simplifiedSongList: songs})\n  }\n\n  populateGrid(data) {\n    // Else generate cards.\n    if (data == null) {\n      return null;\n    }\n    var cardGrid = [];\n    for (var i=0; i < data.length; i++) {\n\n      let name = data[i].name;\n      let album = data[i].album;;\n      let artist = data[i].artist;\n      let songId = data[i].songId;\n      // Truncate info if it is too long to fit on card:\n      if (data[i].name.length > 30) {\n        name = data[i].name.substring(0, 30) + '...'\n      }\n      if (data[i].album.length > 20) {\n        album = data[i].album.substring(0, 20) + '...'\n      }\n      if (data[i].artist.length > 40) {\n        artist = data[i].artist.substring(0, 40) + '...'\n      }\n\n      cardGrid.push(\n          <p key={i} className=\"Card-p\"><SongCard\n              buttonClick={this.onCardClick.bind(this, songId, name, album, artist, data[i].art)}\n              name={name}\n              album={album}\n              artist={artist}\n              artwork={data[i].art}\n              songId={songId}\n          /></p>\n      )\n    }\n    return cardGrid;\n  }\n\n  /**\n   * Renders main page to the DOM.\n   */\n  render() {\n    return (\n        <Router>\n          <div className=\"Search\">\n            <header className=\"Search-header\" >\n              <img src={hellify} className=\"Search-logo\" alt=\"logo\"/>\n              <p>Search for a song</p>\n              <p>or</p>\n              <p>Enter a Spotify song link</p>\n              <div className=\"searchbar\">\n                <form onSubmit={this.handleSubmit}>\n                  <input className=\"Search-box\" type=\"text\" value={this.state.value} placeholder=\"Search..\" onChange={this.handleChange}></input>\n                  <button id=\"searchclick\" type=\"submit\">Search</button>\n                </form>\n              </div>\n              <div style={{marginTop: \"3vh\", position: \"absolute\", top: \"40vh\"}}>\n                {this.state.prompt}\n              </div>\n            </header>\n            {this.state.results}\n            <div id=\"footer\" style={{height: \"36.6vh\"}}/>\n          </div>\n        </Router>\n    );\n  }\n}\n\nexport default SongSearchPage;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. SongSearchPage is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport { Router, Link } from \"react-router-dom\";\nimport hellify from \"../hellify.png\";\nimport '../styles/HomePage.css';\n\n/**\n * Takes song data as props and produces card elements for all data entered. Renders the card grid to he DOM.\n */\nclass HomePage extends React.Component {\n    render() {\n        return (\n            <div className=\"App\">\n                <header className=\"App-header\">\n                    <div style={{display: \"flex\", justifyContent: \"center\", margin: \"4vh\"}}>\n                        <img src={hellify} className=\"Logo\" alt=\"logo\"/>\n                    </div>\n                    <div className=\"Container-home\">\n                        <div>\n                            <h1>Explore your song</h1>\n                            <p>\n                                Discover detailed analytics for your music.\n                                Go deeper and find out what Spotify's algorithms say about your songs!\n                            </p>\n                        </div>\n                        <div>\n                            <h1>Find the right playlist for your song</h1>\n                            <p>\n                                Choose a song and see how well it fits in a given playlist.\n                            </p>\n                        </div>\n                        <div>\n                            <Link to=\"/song\" >\n                                <button>Analyse a song</button>\n                            </Link>\n\n                        </div>\n                        <div>\n                            <Link to=\"/playlist\">\n                                <button>Choose a playlist</button>\n                            </Link>\n                        </div>\n                    </div>\n                </header>\n            </div>\n        );\n    }\n}\n\nexport default HomePage;","import React from 'react';\nimport hellify from '../hellify.png';\nimport '../styles/SearchPage.css';\nimport { BrowserRouter as Router, Route } from 'react-router-dom';\nimport FetchSearchData from '../components/FetchSearchData';\nimport SongCard from \"../components/SongCard\";\n\nclass PlaylistSearchPage extends React.Component {\n    /**\n     * Default constructor for main app.\n     * @param props\n     */\n    constructor(props) {\n        super(props);\n        this.state = {\n            token: 'NO_TOKEN(CLIENT)',\n            playlistsRaw: null,\n            playlistIds: null,\n            searchQuery: '',\n            previousSearchQuery: '',\n            results: <div className=\"Margin\"></div>,\n            prompt: null\n        };\n        this.handleChange = this.handleChange.bind(this);\n        this.handleSubmit = this.handleSubmit.bind(this);\n        this.onCardClick = this.onCardClick.bind(this);\n    }\n\n    /**\n     * Updates the state {searchQuery} whenever a letter is typed in the search box.\n     * @param onChange event for search box input\n     */\n    handleChange(event) {\n        this.setState({ searchQuery: event.target.value });\n    }\n\n    /**\n     * Handles submit of search query.\n     * @param onSubmit event for search submit.\n     */\n    handleSubmit = event => {\n        event.preventDefault();\n        // Don't fetch if there is no query:\n        if (this.state.searchQuery === \"\") {\n            return;\n        }\n        this.setState({previousSearchQuery: this.state.searchQuery})\n        if (this.state.searchQuery == this.state.previousSearchQuery) {\n            return\n        }\n\n        this.waitForFetch();\n    }\n\n    waitForFetch = async () => {\n        // Set timeout for 'searching' message to appear:\n        setTimeout(() => {\n            this.setState({\n                prompt: \"Searching for results...\"\n            });\n        }, 1000);\n        const data = await FetchSearchData.fetchData(this.state.searchQuery, 'playlist');\n        // Clear all timeouts (as search is complete):\n        let id = setTimeout(function() {}, 0);\n        while (id--) {\n            window.clearTimeout(id);\n            this.setState({\n                prompt: null\n            });\n        }\n        this.setState({playlistsRaw: data})\n        // Error handling if no search results are returned:\n        if (data.playlists.items.length === 0) {\n            this.setState({\n                prompt: \"No results found!\",\n                results: <div className=\"Margin\" ></div>\n            });\n            return;\n        }\n        this.generatePlaylistInfo();\n        this.setState({\n            results:\n                <div className=\"Cards\" style={{gridGap: \"5vh\"}}>\n                    {this.populateGrid(this.state.playlistIds)}\n                </div>\n        })\n    };\n\n    /**\n     * When a song card is clicked, redirect to the results page passing the song id as the react router\n     * history object prop 'props.location.search'.\n     * @param songId\n     */\n    onCardClick(playlistId, name, album, artist, art) {\n        console.log(\"Click successful!! ID: \" + playlistId)\n        this.props.history.push({\n            pathname: '/playlists',\n            search: this.props.location.search,\n            hash: playlistId,\n            state: {\n                name: name,\n                album: album,\n                artist: artist,\n                art: art\n            }\n        });\n        console.log(this.props.location.state);\n    }\n\n    generatePlaylistInfo() {\n        const playlists = []\n\n        this.state.playlistsRaw.playlists.items.forEach(playlist => {\n                playlists.push({\n                    playlistId: playlist.id\n                });\n            }\n        );\n        this.setState({playlistIds: playlists})\n    }\n\n    populateGrid(data) {\n        // Else generate cards.\n        if (data == null) {\n            return null;\n        }\n        var cardGrid = [];\n        for (var i=0; i < data.length / 2; i++) {\n\n            let plId = data[i].playlistId;\n\n            cardGrid.push(\n                <p className=\"Playlist-p\" key={i}>\n                    <h2 onClick={this.onCardClick.bind(this, plId,\n                        this.props.location.state.name,\n                        this.props.location.state.album,\n                        this.props.location.state.artist,\n                        this.props.location.state.art\n                    )}>\n                        Select Playlist\n                    </h2>\n                    <p className=\"Playlist-p\" >\n                        <iframe\n                            src={\"https://open.spotify.com/embed/playlist/\" + plId}\n                            width=\"350\"\n                            height=\"350\"\n                            frameBorder=\"0\"\n                            allowTransparency=\"true\"\n                            allow=\"encrypted-media\"\n                        ></iframe>\n                    </p>\n                </p>\n            )\n        }\n        return cardGrid;\n    }\n\n    /**\n     * Renders main page to the DOM.\n     */\n    render() {\n        return (\n            <Router>\n                <div className=\"Search\">\n                    <header className=\"Search-header\" >\n                        <div className=\"Grid\">\n                            <div>\n                                <p>\n                                    <img src={hellify} className=\"Search-logo\" alt=\"logo\"/>\n                                </p>\n                                <p>Search for a playlist</p>\n                                <p>or</p>\n                                <p>Enter a Spotify playlist link</p>\n                                <p></p>\n                                <div className=\"searchbar\">\n                                    <form onSubmit={this.handleSubmit}>\n                                        <input className=\"Search-box\" type=\"text\" value={this.state.value} placeholder=\"Search..\" onChange={this.handleChange}></input>\n                                        <button id=\"searchclick\" type=\"submit\">Search</button>\n                                    </form>\n                                </div>\n                            </div>\n                            <div>\n                                <p>Song being analysed:</p>\n                                <p className=\"Card-p\"><SongCard\n                                    name={this.props.location.state.name}\n                                    album={this.props.location.state.album}\n                                    artist={this.props.location.state.artist}\n                                    artwork={this.props.location.state.art}\n                                    songId={this.props.location.state.songId}\n                                /></p>\n                            </div>\n                        </div>\n                        <div style={{marginTop: \"3vh\", position: \"absolute\", top: \"40vh\"}}>\n                            {this.state.prompt}\n                        </div>\n                    </header>\n                    {this.state.results}\n                    <div id=\"footer\" style={{height: \"36.6vh\"}}/>\n                </div>\n            </Router>\n        );\n    }\n}\n\nexport default PlaylistSearchPage;","import React from 'react';\nimport {BrowserRouter as Router, Route} from \"react-router-dom\";\n\n\nclass SongPage extends React.Component {\n    render() {\n        return (\n            <div>\n                Song Analyser\n            </div>\n        )\n    }\n}\n\nexport default SongPage;","import React from 'react';\nimport {BrowserRouter as Router, Route} from \"react-router-dom\";\n\n\nclass PlaylistPage extends React.Component {\n    render() {\n        return (\n            <div>\n                Playlist Analyser\n            </div>\n        )\n    }\n}\n\nexport default PlaylistPage;","import React from 'react';\nimport {BrowserRouter as Router, Route} from \"react-router-dom\";\n\n\nclass AboutPage extends React.Component {\n    render() {\n        return (\n            <div>\n                About {this.props.search}\n            </div>\n        )\n    }\n}\n\nexport default AboutPage;","class FetchTrackFeatures {\n    /**\n     * Calls Spotify API using token. Type = 'features' or 'analysis'.\n     * @returns {Promise<void>}\n     */\n    static fetchData = async (songId, type) => {\n        let data = '';\n        /**\n         * Calls my node server which requests a Spotify client access token.\n         * @returns {Promise<any>} Json body containing Spotify client token and test message\n         */\n        const getToken = async () => {\n            const response = await fetch('/authenticate');\n            const body = await response.json();\n\n            if (response.status !== 200) {\n                throw Error(body.message)\n            }\n            return body;\n        };\n        const requestToken = await getToken();\n        const token = requestToken.myToken;\n        var myOptions = {\n            headers: {\n                Authorization: 'Bearer ' + token\n            }\n        }\n        // Replaces special characters in query:\n        const endpoint = 'https://api.spotify.com/v1/';\n        const ty = type;\n        const id = songId;\n        const url = endpoint + ty + id;\n\n        const response = await fetch(url, myOptions)\n        console.log(url);\n        data = await response.json();\n        return data;\n    }\n}\n\nexport default FetchTrackFeatures;","import React from 'react';\nimport \"../styles/BackgroundSvgPaths.css\";\n\n\nclass BackgroundSvgPaths extends React.Component {\n    render() {\n        return (\n            <div className=\"background\">\n                <svg viewBox=\"0 0 1920 2140\" style={{top: this.props.shiftDown}}>\n                    <path fill={this.props.fill}\n                          d=\"M 0.00,1811.00\n           C 0.00,1811.00 0.00,1214.00 0.00,1214.00\n             0.00,1214.00 0.99,1206.61 0.99,1206.61\n             0.99,1206.61 9.00,1201.00 9.00,1201.00\n             9.00,1201.00 25.00,1191.20 25.00,1191.20\n             25.00,1191.20 107.00,1141.20 107.00,1141.20\n             107.00,1141.20 449.00,932.80 449.00,932.80\n             449.00,932.80 726.00,763.81 726.00,763.81\n             726.00,763.81 1059.00,560.81 1059.00,560.81\n             1059.00,560.81 1328.00,396.81 1328.00,396.81\n             1328.00,396.81 1450.00,322.58 1450.00,322.58\n             1450.00,322.58 1595.00,234.19 1595.00,234.19\n             1595.00,234.19 1776.00,123.80 1776.00,123.80\n             1776.00,123.80 1875.00,63.40 1875.00,63.40\n             1875.00,63.40 1904.00,45.80 1904.00,45.80\n             1904.00,45.80 1920.00,37.00 1920.00,37.00\n             1920.00,37.00 1920.00,633.00 1920.00,633.00\n             1920.00,633.00 1918.98,640.82 1918.98,640.82\n             1918.98,640.82 1911.00,647.00 1911.00,647.00\n             1911.00,647.00 1895.00,656.80 1895.00,656.80\n             1895.00,656.80 1814.00,706.05 1814.00,706.05\n             1814.00,706.05 1670.00,793.81 1670.00,793.81\n             1670.00,793.81 1470.00,915.80 1470.00,915.80\n             1470.00,915.80 1271.00,1037.19 1271.00,1037.19\n             1271.00,1037.19 961.00,1226.19 961.00,1226.19\n             961.00,1226.19 628.00,1429.19 628.00,1429.19\n             628.00,1429.19 465.00,1528.42 465.00,1528.42\n             465.00,1528.42 155.00,1717.42 155.00,1717.42\n             155.00,1717.42 51.00,1780.81 51.00,1780.81\n             51.00,1780.81 18.00,1801.00 18.00,1801.00\n             18.00,1801.00 0.00,1811.00 0.00,1811.00 Z\" />\n                </svg>\n            </div>\n        )\n    }\n}\n\nexport default BackgroundSvgPaths;","import React from 'react';\nimport FetchTrackFeatures from \"../components/FetchTrackFeatures\";\nimport \"../styles/SongResultsPage.css\";\nimport {Bar, HorizontalBar} from 'react-chartjs-2';\nimport SongCard from \"../components/SongCard\";\nimport { ComposableMap, Geographies, Geography } from \"react-simple-maps\"\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport { withStyles } from '@material-ui/core/styles';\nimport InfoOutlinedIcon from '@material-ui/icons/InfoOutlined';\nimport ColorThief from \"color-thief\";\nimport * as Vibrant from \"node-vibrant\";\nimport BackgroundSvgPaths from \"../components/BackgroundSvgPaths\";\n\nconst LightTooltip = withStyles((theme) => ({\n    tooltip: {\n        backgroundColor: theme.palette.common.white,\n        color: 'rgba(0, 0, 0, 0.87)',\n        boxShadow: theme.shadows[1],\n        lineHeight: \"25px\",\n        textAlign: \"center\",\n    },\n    arrow: {\n        color: theme.palette.common.white,\n    }\n}))(Tooltip);\n\nconst RGB_Linear_Shade=(p,c)=>{\n    var i=parseInt,r=Math.round,[a,b,c,d]=c.split(\",\"),P=p<0,t=P?0:255*p,P=P?1+p:1-p;\n    return\"rgb\"+(d?\"a(\":\"(\")+r(i(a[3]==\"a\"?a.slice(5):a.slice(4))*P+t)+\",\"+r(i(b)*P+t)+\",\"+r(i(c)*P+t)+(d?\",\"+d:\")\");\n}\n\n// this.props.location.search gives the song id!!!\nclass SongResultsPage extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            rawFeatures: [],\n            rawAnalysis: [],\n            rawTrack: {\n                album: {\n                    id: \"null\"\n                },\n                available_markets: []\n            },\n            rawAlbum: [],\n            data: [],\n            options: [],\n            prompt: null,\n            invalid: false,\n            modality: \"\",\n            songCard: null,\n            bgImage: null,\n            explicit: null,\n            live: null,\n            instrumental: null,\n            musicality: null,\n            key: null,\n            artists: null,\n            albumColours1: \"white\",\n            albumColours2: \"white\",\n            albumColours3: \"white\",\n            albumColours4: \"white\",\n        }\n    }\n\n    componentDidMount = async () =>  {\n        await this.waitForFeatures();\n        await this.waitForAnalysis();\n        await this.waitFortrack();\n        await this.waitForAlbum();\n        this.generateSongFeatures();\n        this.setBgColours();\n    }\n\n    setBgColours() {\n        // Get bg colours using Vibrant promise:\n        const img = document.querySelector('img');\n        img.crossOrigin = \"Anonymous\";\n        const colorThief = new ColorThief();\n        // Make sure image is finished loading\n        img.addEventListener('load', function() {\n            let colour = colorThief.getColor(img);\n            Vibrant.from(img).getPalette()\n                .then((palette) => {\n                    console.log(palette);\n                    let rgb1 = palette.Vibrant.getRgb();\n                    let rgb2 = palette.DarkVibrant.getRgb();\n                    let rgb3 = palette.DarkMuted.getRgb();\n                    let rgb4 = palette.Muted.getRgb();\n                    rgb1 = RGB_Linear_Shade(0.3, (\"rgb(\" + rgb1[0] + \",\" + rgb1[1] + \",\" + rgb1[2] + \")\"));\n                    rgb2 = RGB_Linear_Shade(0.3, (\"rgb(\" + rgb2[0] + \",\" + rgb2[1] + \",\" + rgb2[2] + \")\"));\n                    rgb3 = RGB_Linear_Shade(0.3, (\"rgb(\" + rgb3[0] + \",\" + rgb3[1] + \",\" + rgb3[2] + \")\"));\n                    rgb4 = RGB_Linear_Shade(0.3, (\"rgb(\" + rgb4[0] + \",\" + rgb4[1] + \",\" + rgb4[2] + \")\"));\n                    this.setState({\n                        albumColours1: rgb1,\n                        albumColours2: rgb2,\n                        albumColours3: rgb3,\n                        albumColours4: rgb4\n                    })}\n                )\n        }.bind(this));\n    }\n\n    waitFortrack = async () => {\n        const songId = this.props.location.search;\n        const data = await FetchTrackFeatures.fetchData(songId.substring(1, songId.length), 'tracks/');\n        // Error handling if no search results are returned:\n        if (data.length === 0) {\n            this.setState({\n                prompt: \"Invalid song ID\",\n                invalid: true\n            });\n            return;\n        }\n        console.log(data);\n        this.setState({rawTrack: data});\n        let name = data.name;\n        let album = data.album.name;\n        let artist = data.artists[0].name;\n        // Truncate info if it is too long to fit on card:\n        if (data.name.length > 30) {\n            name = data.name.substring(0, 30) + '...'\n        }\n        if (data.album.name.length > 20) {\n            album = data.album.name.substring(0, 20) + '...'\n        }\n        if (data.artists[0].name.length > 40) {\n            artist = data.artists[0].name.substring(0, 40) + '...'\n        }\n        let expl = \"Unknown\";\n        if (data.explicit === true) {\n            expl = \"Yes\";\n        } else {\n            expl = \"No\";\n        }\n        let artists = \"\";\n        data.artists.forEach(artist => {\n                artists += artist.name + \", \"\n        });\n        // Remove final comma:\n        artists = artists.substring(0, (artists.length) - 2);\n        this.setState({\n            songCard: <SongCard\n                name={name}\n                album={album}\n                artist={artist}\n                artwork={this.state.rawTrack.album.images[1].url}\n            />,\n            explicit: expl,\n            artists: artists,\n        })\n\n    };\n\n    waitForFeatures = async () => {\n        const songId = this.props.location.search;\n        const data = await FetchTrackFeatures.fetchData(songId.substring(1, songId.length), 'audio-features/');\n        // Error handling if no search results are returned:\n        if (data.length === 0) {\n            this.setState({\n                prompt: \"Invalid song ID\",\n                invalid: true\n            });\n            return;\n        }\n        let live = \"Maybe\";\n        if (data.liveness < 0.5) {\n            live = \"No\"\n        } else if (data.liveness > 0.5) {\n            live = \"Yes\"\n        }\n        let acoustic = \"Maybe\";\n        if (data.acousticness < 0.3) {\n            acoustic = \"No\";\n        } else if (data.acousticness < 0.5) {\n            acoustic = \"Maybe\";\n        } else {\n            acoustic = \"Yes\";\n        }\n        let instrumental = \"Unknown\";\n        if (data.instrumentalness < 0.5) {\n            instrumental = \"No\";\n        } else {\n            instrumental = \"Yes\";\n        }\n        let musicality = \"Unknown\";\n        if (data.speechiness < 0.33) {\n            musicality = \"Musical\";\n        } else if (data.speechiness < 0.66){\n            musicality = \"Musical and spoken\";\n        } else {\n            musicality = \"Spoken word\";\n        }\n        let key = \"Unknown\";\n        if (data.key === 0) {\n            key = \"C\";\n        } else if (data.key === 1) {\n            key = \"C #\";\n        } else if (data.key === 2) {\n            key = \"D\";\n        } else if (data.key === 3) {\n            key = \"D #\";\n        } else if (data.key === 4) {\n            key = \"E\";\n        } else if (data.key === 5) {\n            key = \"F\";\n        } else if (data.key === 6) {\n            key = \"F #\";\n        } else if (data.key === 7) {\n            key = \"G\";\n        } else if (data.key === 8) {\n            key = \"G #\";\n        } else if (data.key === 9) {\n            key = \"A\";\n        } else if (data.key === 10) {\n            key = \"A #\";\n        } else if (data.key === 11) {\n            key = \"B\";\n        }\n        console.log(data);\n        this.setState({\n            rawFeatures: data,\n            live: live,\n            acoustic: acoustic,\n            instrumental: instrumental,\n            musicality: musicality,\n            key: key\n        });\n        if (data.mode === 1) {\n            this.setState({modality: \"Major\"})\n        } else if (data.mode === 0) {\n            this.setState({modality: \"Minor\"})\n        }\n    };\n\n    waitForAnalysis = async () => {\n        if (this.state.invalid === true) {\n            return;\n        }\n        const songId = this.props.location.search;\n        const data = await FetchTrackFeatures.fetchData(songId.substring(1, songId.length), 'audio-analysis/');\n        // Error handling if no search results are returned:\n        if (data.length === 0) {\n            this.setState({\n                prompt: \"Invalid song ID\",\n                invalid: true\n            });\n            return;\n        }\n        this.setState({rawAnalysis: data});\n    };\n\n    waitForAlbum = async () => {\n        if (this.state.invalid === true) {\n            return;\n        }\n        const songId = this.props.location.search;\n        const data = await FetchTrackFeatures.fetchData(this.state.rawTrack.album.id, 'albums/');\n        // Error handling if no search results are returned:\n        if (data.length === 0) {\n            this.setState({\n                prompt: \"Invalid song ID\",\n                invalid: true\n            });\n            return;\n        }\n        console.log(data);\n        this.setState({\n            rawAlbum: data,\n        });\n    };\n\n    generateSongFeatures() {\n        const chartData = {\n            labels: [\"Danceability\", \"Energy\", \"Happiness\"],\n            datasets: [{\n                label: \"Song features\",\n                backgroundColor: 'darkred',\n                borderColor: 'rgb(255, 99, 132)',\n                data: [(this.state.rawFeatures.danceability * 10).toFixed(2), (this.state.rawFeatures.energy * 10).toFixed(2),\n                    (this.state.rawFeatures.valence * 10).toFixed(2)]\n            }]\n        }\n        const chartOptions = {\n            tooltips: {\n                callbacks: {\n                    title: function (tooltipItem, data) {\n                        return data['labels'][tooltipItem[0]['index']];\n                    },\n                    label: function (tooltipItem, data) {\n                        return data['datasets'][0]['data'][tooltipItem['index']];\n                    },\n                },\n                backgroundColor: '#FFF',\n                titleFontSize: 16,\n                titleFontColor: '#0066ff',\n                bodyFontColor: '#000',\n                bodyFontSize: 14,\n                displayColors: false,\n            },\n            legend: {\n                display: false,\n                labels: {\n                    fontColor: \"white\",\n                }\n            },\n            scales: {\n                yAxes: [{\n                    ticks: {\n                        display: true,\n                        fontColor: \"white\",\n                    },\n                    gridLines: {\n                        display: false,\n                        drawBorder: false\n                    }\n                }],\n                xAxes: [{\n                    barPercentage: 0.5,\n                    ticks: {\n                        fontColor: \"white\",\n                        fontSize: 14,\n                        min: 0,\n                        max: 10,\n                        stepSize: 1\n                    },\n                    gridLines: {\n                        display: false,\n                        drawBorder: false\n                    }\n                }]\n            },\n        }\n        this.setState({\n            data: chartData,\n            options: chartOptions\n        })\n    }\n\n    render() {\n        return (\n            <div className=\"Main\" style={{backgroundColor: this.state.albumColours1}}>\n                <div style={{width: \"1vw\", marginLeft: \"-1vw\"}}>\n                    <BackgroundSvgPaths fill={this.state.albumColours2}/>\n                    <BackgroundSvgPaths fill={this.state.albumColours3} shiftDown=\"-100vh\"/>\n                    <BackgroundSvgPaths fill={this.state.albumColours4} shiftDown=\"100vh\"/>\n                    <BackgroundSvgPaths fill={this.state.albumColours2} shiftDown=\"200vh\"/>\n                </div>\n                <div className=\"Header\">\n                    <p>Song Analysis</p>\n                    <p id=\"Song-card\">{this.state.songCard}</p>\n                </div>\n                <div className=\"Container\">\n                    <div style={{display: \"flex\", fontSize: \"2.5vh\", padding: \"1vh\", textAlign: \"left\", paddingLeft: \"3vh\", alignContent: \"left\"}}><InfoOutlinedIcon style={{paddingRight: \"0.3vw\"}} /> Hover over an item for more information.</div>\n                    <div>\n                        <h2>Song Mood Features:<button style={{display: \"flex\", marginLeft: \"2vw\"}}>What's this?</button></h2>\n                        <hr/>\n                        <p>\n                            <HorizontalBar className=\"Chart\" data={this.state.data} options={this.state.options}/>\n                        </p>\n                    </div>\n                    <div>\n                        <h2 style={{marginBottom: \"0vh\"}}>Musical information:</h2>\n                        <p style={{fontSize: \"1.9vh\", marginLeft: \"2vh\"}}/>\n                        <hr/>\n                        <LightTooltip arrow=\"true\" enterTouchDelay=\"100\" title={<p className=\"Tooltip\">\n                            Tempo of the song in beats per minute.\n                        </p>}>\n                            <p>Tempo: {Math.round(this.state.rawFeatures.tempo)} bpm</p>\n                        </LightTooltip>\n                        <hr/>\n                        <LightTooltip arrow=\"true\" enterTouchDelay=\"100\" title={<p className=\"Tooltip\">\n                            Time signature of the song.\n                        </p>}>\n                            <p>Time signature: {this.state.rawFeatures.time_signature}/4</p>\n                        </LightTooltip>\n                        <hr/>\n                        <LightTooltip arrow=\"true\" enterTouchDelay=\"100\" title={<p className=\"Tooltip\">\n                            Musical key of the song.\n                        </p>}>\n                            <p>Key: {this.state.key}</p>\n                        </LightTooltip>\n                        <hr/>\n                        <LightTooltip arrow=\"true\" enterTouchDelay=\"100\" title={<p className=\"Tooltip\">\n                            Modality of the song (Major or Minor).\n                        </p>}>\n                            <p>Modality: {this.state.modality}</p>\n                        </LightTooltip>\n                        <hr/>\n                        <LightTooltip arrow=\"true\" enterTouchDelay=\"100\" title={<p className=\"Tooltip\">\n                            Whether the song is acoustic or not. Spotify gives songs an 'Acousticness' rating on a scale of 0.0 - 1.0.\n                            The closer to 1.0 this value is, the higher the probability that the track is acoustic. The Acousticness rating\n                            for this track is {this.state.rawFeatures.acousticness}.\n                        </p>}>\n                            <p>Acoustic: {this.state.acoustic}</p>\n                        </LightTooltip>\n                        <hr/>\n                        <LightTooltip arrow=\"true\" enterTouchDelay=\"100\" title={<p className=\"Tooltip\">\n                            Whether the song is instrumental, or contains vocals. 'Instrumentalness' is given on a scale of 0.0 - 1.0.\n                            The closer to 1.0 this value is, the higher the probability that the track is purely instrumental. The\n                            'Instrumentalness' rating for this song is {this.state.rawFeatures.liveness}.\n                        </p>}>\n                        <p>Instrumental: {this.state.instrumental}</p>\n                        </LightTooltip>\n                        <hr/>\n                        <LightTooltip arrow=\"true\" enterTouchDelay=\"100\" title={<p className=\"Tooltip\">\n                            The musicality of a song is a measure of whether it contains music or people talking. 'Speechiness' is given on a scale of 0.0 - 0.1,\n                            and songs with high Speechiness are less musical and contain more spoken words. For example, a podcast would have a 'Speechiness'\n                            value greater than 0.66, and a normal song containing singing would have a value below 0.33. Rap and poetry fall somewhere in the middle.\n                            The possibilities for Musicality are \"Musical\", \"Musical and spoken\", or \"Spoken word\". This track has a Speechiness value\n                            of {this.state.rawFeatures.speechiness}.\n                        </p>}>\n                        <p>Musicality: {this.state.musicality}</p>\n                        </LightTooltip>\n                        <hr/>\n                    </div>\n                    <div>\n                        <h2>Song details:</h2>\n                        <hr/>\n                        <LightTooltip arrow=\"true\" enterTouchDelay=\"100\" title={<p className=\"Tooltip\">\n                            The name of the song.\n                        </p>}>\n                            <p>Name: {this.state.rawTrack.name}</p>\n                        </LightTooltip>\n                        <hr/>\n                        <LightTooltip arrow=\"true\" enterTouchDelay=\"100\" title={<p className=\"Tooltip\">\n                            All artists who created and collaborated on the song.\n                        </p>}>\n                            <p>Artists: {this.state.artists}</p>\n                        </LightTooltip>\n                        <hr/>\n                        <LightTooltip arrow=\"true\" enterTouchDelay=\"100\" title={<p className=\"Tooltip\">\n                            Whether the lyrics contain explicit content or not..\n                        </p>}>\n                            <p>Explicit lyrics: {this.state.explicit}</p>\n                        </LightTooltip>\n                        <hr/>\n                        <LightTooltip arrow=\"true\" enterTouchDelay=\"100\" title={<p className=\"Tooltip\">\n                            How popular the song is. This is a number between 0 and 100, with 100 being the most popular.\n                            Popularity is based on the total number of recent plays, meaning songs which were popular in the\n                            past might now have a low popularity rating. The popularity is relative, with the most popular\n                            song on Spotify having a popularity of 100, so songs with popularity ratings that seem quite low may actually\n                            be relatively popular.\n                        </p>}>\n                            <p>Popularity: {this.state.rawTrack.popularity}</p>\n                        </LightTooltip>\n                        <hr/>\n                        <LightTooltip arrow=\"true\" enterTouchDelay=\"100\" title={<p className=\"Tooltip\">\n                            Length of the song.\n                        </p>}>\n                            <p>Length: {((this.state.rawFeatures.duration_ms) / 1000 / 60).toFixed(2)} minutes</p>\n                        </LightTooltip>\n                        <hr/>\n                        <LightTooltip arrow=\"true\" enterTouchDelay=\"100\" title={<p className=\"Tooltip\">\n                            Whether the song is live or not. This is determined by the amount of 'audience noise' detected in the recording,\n                            on a scale of 0.0 - 1.0. The 'Liveness' rating for this track is {this.state.rawFeatures.liveness}.\n                        </p>}>\n                            <p>Live: {this.state.live}</p>\n                        </LightTooltip>\n                        <hr/>\n                    </div>\n                    <div style={{paddingBottom: \"0vh\", marginBottom: \"0vh\"}}>\n                        <h2>Album preview:</h2>\n                        <hr/>\n                        <iframe\n                            src={\"https://open.spotify.com/embed/album/\" + this.state.rawTrack.album.id}\n                            width=\"350\"\n                            height=\"350\"\n                            frameBorder=\"0\"\n                            allowTransparency=\"true\"\n                            allow=\"encrypted-media\"\n                        ></iframe>\n                    </div>\n                    <div>\n                        <h2>Album details:</h2>\n                        <hr/>\n                        <p>Name: {this.state.rawAlbum.name}</p>\n                        <hr/>\n                        <p>Release date: {this.state.rawAlbum.release_date}</p>\n                        <hr/>\n                        <p>Popularity: {this.state.rawAlbum.popularity}</p>\n                        <hr/>\n                        <p>Type: {this.state.rawAlbum.album_type}</p>\n                        <hr/>\n                        <p>Record label: {this.state.rawAlbum.label}</p>\n                        <hr/>\n                    </div>\n                    <div>\n                        <h2>Available regions:</h2>\n                        <hr/>\n                        <p style={{justifyContent: \"center\", display: \"flex\"}}>\n                            <ComposableMap style={{color: \"white\", height: \"42vh\", marginRight: \"2vw\"}}>\n                                <Geographies geography=\"https://raw.githubusercontent.com/zcreativelabs/react-simple-maps/master/topojson-maps/world-110m.json\">\n                                    {({geographies}) => geographies.map(geo => {\n                                            const d = this.state.rawTrack.available_markets.find(s => s === geo.properties.ISO_A2);\n                                            return (\n                                                <Geography\n                                                    key={geo.rsmKey}\n                                                    geography={geo}\n                                                    fill={d ? \"darkred\" : \"white\"}\n                                                />\n                                            );\n                                        }\n                                    )}\n                                </Geographies>\n                            </ComposableMap>\n                        </p>\n                    </div>\n                    <div>\n                        <h2>Mood features explained:</h2>\n                        <hr/>\n                        <p>All mood feature data is taken from Spotify, who use algorithms to calculate the numbers shown.</p>\n                        <h2>Energy</h2>\n                        <p>\n                            The 'Energy' of a song determines how energetic the song feels, and is a measure of intensity and musical activity, with energetic\n                            tracks feeling fast, busy and noisy. Energy is calculated by taking into account the dynamic range,\n                            the loudness, the timbre, and the onset rate (rate of notes played). Energy is determined on a scale of 0 - 10,\n                            with 10 being the most energetic.\n                        </p>\n                        <h2>Danceability</h2>\n                        <p>\n                            The 'Danceability' of a song describes how good a track is to dance to. This takes into account\n                            a number of musical elements including tempo, how stable the rhythm is, the strength of each beat,\n                            and how regular the musical pattern is. Dancibility is determined on a scale of 0 - 10, with 10 being\n                            the most danceable.\n                        </p>\n                        <h2>Happiness</h2>\n                        <p>\n                            The happiness or 'Valence' of a song is how positive it sounds. Tracks with high valence sound more positive\n                            (happy, cheerful, euphoric) while tracks with low valence sound more negative (sad, depressed, angry).\n                            Happiness is determined on a scale of 0 - 10, with 10 being the most positive sounding.\n                        </p>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default SongResultsPage;","import {Bar} from \"react-chartjs-2\";\nimport React from \"react\";\n\nclass Histogram extends React.Component {\n    constructor() {\n        super();\n        this.state = {\n            data: {},\n            options: {}\n        }\n    }\n\n    componentDidMount() {\n        this.generateChart();\n    }\n\n    generateChart() {\n        let chartData = {\n            labels: [0.0, 0.5, 1.0, 1.5, 2.0, 2.5, 3.0, 3.5, 4.0, 4.5, 5.0, 5.5, 6.0, 6.5, 7.0, 7.5, 8.0, 8.5, 9.0, 9.5, 10.0],\n            datasets: [{\n                label: \"Song features\",\n                backgroundColor: [\"darkred\", \"darkred\", \"darkred\", \"darkred\", \"darkred\", \"darkred\", \"darkred\", \"darkred\", \"darkred\", \"darkred\",\n                    \"darkred\", \"darkred\", \"darkred\", \"darkred\", \"darkred\",\"darkred\", \"darkred\", \"darkred\", \"darkred\", \"darkred\",],\n                borderColor: 'rgb(255, 99, 132)',\n                barPercentage: 1.0,\n                categoryPercentage: 1.0,\n                data: this.props.data\n            }]\n        }\n        // Set colour of comparison song:\n        chartData.datasets[0].backgroundColor[this.props.songIndex] = \"darkgreen\";\n\n        const chartOptions = {\n            tooltips: {\n                callbacks: {\n                    title: function (tooltipItem, data) {\n                        return data['labels'][tooltipItem[0]['index']];\n                    },\n                    label: function (tooltipItem, data) {\n                        return data['datasets'][0]['data'][tooltipItem['index']];\n                    },\n                },\n                backgroundColor: '#FFF',\n                titleFontSize: 16,\n                titleFontColor: '#0066ff',\n                bodyFontColor: '#000',\n                bodyFontSize: 14,\n                displayColors: false,\n            },\n            legend: {\n                display: false,\n                labels: {\n                    fontColor: \"white\",\n                }\n            },\n            scales: {\n                yAxes: [{\n                    ticks: {\n                        display: true,\n                        fontColor: \"white\",\n                    },\n                    gridLines: {\n                        display: false,\n                        drawBorder: false\n                    }\n                }],\n                xAxes: [{\n                    display: false,\n                    ticks: {\n                        max: 20\n                    },\n                }, {\n                    display: true,\n                    ticks: {\n                        fontColor: \"white\",\n                        fontSize: 14,\n                        autoSkip: false,\n                        max: 10,\n                        stepSize: 1\n                    }\n                }]\n            },\n        }\n        this.setState({\n            data: chartData,\n            options: chartOptions\n        })\n    }\n\n    render() {\n        return (\n            <Bar className=\"Chart\" data={this.state.data} options={this.state.options}/>\n        )\n    }\n\n}\n\nexport default Histogram;","import React from 'react';\nimport {BrowserRouter as Router, Route} from \"react-router-dom\";\nimport FetchTrackFeatures from \"../components/FetchTrackFeatures\";\nimport SongCard from \"../components/SongCard\";\nimport '../styles/PlaylistResultsPage.css'\nimport InfoOutlinedIcon from \"@material-ui/icons/InfoOutlined\";\nimport ErrorOutlineIcon from \"@material-ui/icons/ErrorOutline\";\nimport {HorizontalBar} from \"react-chartjs-2\";\nimport Histogram from \"../components/Histogram\";\nimport * as Vibrant from 'node-vibrant';\nimport BackgroundSvgPaths from \"../components/BackgroundSvgPaths\";\nimport ColorThief from 'color-thief';\n\nconst RGB_Linear_Shade=(p,c)=>{\n    var i=parseInt,r=Math.round,[a,b,c,d]=c.split(\",\"),P=p<0,t=P?0:255*p,P=P?1+p:1-p;\n    return\"rgb\"+(d?\"a(\":\"(\")+r(i(a[3]==\"a\"?a.slice(5):a.slice(4))*P+t)+\",\"+r(i(b)*P+t)+\",\"+r(i(c)*P+t)+(d?\",\"+d:\")\");\n}\n\nclass PlaylistResultsPage extends React.Component {\n    constructor() {\n        super();\n        this.state = {\n            danceHist: null,\n            energyHist: null,\n            valenceHist: null,\n            score: [],\n            chartData: [],\n            chartOptions: [],\n            featureInfo1: [],\n            featureInfo2: [],\n            featureInfoColour: [],\n            errorVis: \"hidden\",\n            fit: {\n                stDevs: [0, 0, 0],\n                sigmas: [0, 0, 0]\n            },\n            albumColours1: \"white\",\n            albumColours2: \"white\",\n            albumColours3: \"white\",\n            albumColours4: \"white\",\n        }\n    }\n\n    componentDidMount() {\n        this.waitFortracks();\n    }\n\n    waitFortracks = async () => {\n        const songId = this.props.location.search;\n        const plId = this.props.location.hash;\n        const plTracks = await FetchTrackFeatures.fetchData('', 'playlists/' +\n            plId.substring(1, this.props.location.hash.length) + '/tracks');\n        let plTrackIds = '';\n        let n = 0;\n        console.log(plTracks);\n        plTracks.items.forEach(track => {\n            n++;\n            // Limit results to chosen song + 100 songs from playlist:\n            if (n === 100) {\n                return;\n            }\n            plTrackIds += track.track.id + ','\n        });\n        // Remove final comma:\n        plTrackIds = plTrackIds.substring(0, (plTrackIds.length) - 1);\n        // Index 0 is the song being fitted to the playlist:\n        const featureData = await FetchTrackFeatures.fetchData(this.props.location.search.substring(1, this.props.location.search.length) +\n            ',' + plTrackIds, 'audio-features/?ids=');\n        // Error handling if no search results are returned:\n        if (featureData.length === 0) {\n            this.setState({\n                prompt: \"Invalid ID\",\n                invalid: true\n            });\n            return;\n        }\n\n        // Get bg colours using Vibrant promise:\n        const img = document.querySelector('img');\n        img.crossOrigin = \"Anonymous\";\n        const colorThief = new ColorThief();\n        // Make sure image is finished loading\n        img.addEventListener('load', function() {\n            let colour = colorThief.getColor(img);\n            Vibrant.from(img).getPalette()\n                .then((palette) => {\n                    console.log(palette);\n                    let rgb1 = palette.Vibrant.getRgb();\n                    let rgb2 = palette.DarkVibrant.getRgb();\n                    let rgb3 = palette.DarkMuted.getRgb();\n                    let rgb4 = palette.Muted.getRgb();\n                    rgb1 = RGB_Linear_Shade(0.3, (\"rgb(\" + rgb1[0] + \",\" + rgb1[1] + \",\" + rgb1[2] + \")\"));\n                    rgb2 = RGB_Linear_Shade(0.3, (\"rgb(\" + rgb2[0] + \",\" + rgb2[1] + \",\" + rgb2[2] + \")\"));\n                    rgb3 = RGB_Linear_Shade(0.3, (\"rgb(\" + rgb3[0] + \",\" + rgb3[1] + \",\" + rgb3[2] + \")\"));\n                    rgb4 = RGB_Linear_Shade(0.3, (\"rgb(\" + rgb4[0] + \",\" + rgb4[1] + \",\" + rgb4[2] + \")\"));\n                    this.setState({\n                        albumColours1: rgb1,\n                        albumColours2: rgb2,\n                        albumColours3: rgb3,\n                        albumColours4: rgb4\n                    })}\n                )\n        }.bind(this));\n\n        let fit = await this.simplifyData(featureData);\n        let scores = [];\n        let featureInfo1 = [];\n        let featureInfo2 = [];\n        let featureInfoColour = [];\n\n        for (let i = 0; i < 3; i++) {\n            let feat = \"\";\n            if (i === 0) {\n                feat = \"Danceability\";\n            } else if (i === 1) {\n                feat = \"Energy\";\n            } else {\n                feat = \"Positivity\";\n            }\n\n            if (fit.sigmas[i] === 1 && fit.stDevs[i] <= 0.15) {\n                scores[i] = 4;\n                featureInfo1[i] = \"Perfect fit!\"\n                featureInfo2[i] = `The ${feat} of your chosen song fits the chosen playlist perfectly! The playlist songs\n                all have very a similiar ${feat}, and your chosen song sits right in the middle of the distribution.`;\n                featureInfoColour[i] = \"#1E9600\";\n            } else if (fit.sigmas[i] === 1 && fit.stDevs[i] > 0.15) {\n                scores[i] = 3;\n                featureInfo1[i] = \"Great fit!\"\n                featureInfo2[i] = `The ${feat} of your chosen song fits the chosen playlist very well. The playlist songs\n                don't follow a close pattern for ${feat}, and the values vary a lot. This means ${feat} isn't so important\n                for this playlist, but your song still fits well!`;\n                featureInfoColour[i] = \"#77b300\";\n            } else if ((fit.sigmas[i] === 2 || fit.sigmas[i] === 3) && fit.stDevs[i] > 0.15) {\n                scores[i] = 2;\n                featureInfo1[i] = \"Average fit\"\n                featureInfo2[i] = `The ${feat} of your chosen song isn't a great fit. The playlist songs don't\n                follow a close pattern for ${feat} however, so ${feat} isn't that important for this playlist. There is a lot of\n                variation, so your song could potentially still fit here!`;\n                featureInfoColour[i] = \"#ffcc00\";\n            } else if (fit.sigmas[i] === 2 && fit.stDevs[i] <= 0.15) {\n                scores[i] = 1;\n                featureInfo1[i] = \"Poor fit\";\n                featureInfo2[i] = `The ${feat} of your chosen song doesn't fit the chosen playlist well. The ${feat} of the songs on this\n                playlist follow a very tight pattern, and your song's ${feat} doesn't follow this pattern. This is a sign\n                that your song may not be right for this playlist.`;\n                featureInfoColour[i] = \"#cc2900\";\n            } else {\n                scores[i] = 0;\n                featureInfo1[i] = \"Terrible fit\";\n                featureInfo2[i] = `The ${feat} of your chosen song does not fit the playlist well. It falls very far outside\n                the distribution. This is a sign that your song probably isn't right for this playlist.`;\n                featureInfoColour[i] = \"#e60000\";\n            }\n        }\n\n        /*let summaryString = \"The \";\n        for (let i = 0; i < 3; i++) {\n            let feat = \"\";\n            if (i === 0) {\n                feat = \"Danceability\";\n            } else if (i === 1) {\n                feat = \"Energy\";\n            } else {\n                feat = \"Positivity\";\n            }\n            if (featureInfo1[i] === (\"Perfect fit!\" || \"Great fit!\")) {\n                summaryString += feat + \", \";\n            }\n\n        }*/\n\n        console.log(\"Score: \", scores);\n        let totalScore = [scores.reduce((a, b) => a + b, 0)];\n        this.setState({\n            score: totalScore,\n            featureInfo1: featureInfo1,\n            featureInfo2: featureInfo2,\n            featureInfoColour: featureInfoColour,\n            fit: fit\n        })\n        this.generateScoreChart(totalScore);\n        console.log(totalScore);\n    };\n\n    generateScoreChart(score) {\n        const chartData = {\n            labels: [\"Score\"],\n            datasets: [{\n                label: \"Song Score\",\n                backgroundColor: 'darkred',\n                borderColor: 'rgb(255, 99, 132)',\n                data: score\n            }]\n        }\n        // Colour the bar:\n        if (score > 10) {\n            chartData.datasets[0].backgroundColor = \"#1E9600\";\n        } else if (score > 8) {\n            chartData.datasets[0].backgroundColor = \"#77b300\";\n        } else if (score > 6) {\n            chartData.datasets[0].backgroundColor = \"#bfff00\";\n        } else if (score > 5) {\n            chartData.datasets[0].backgroundColor = \"#ffcc00\";\n        } else if (score > 3) {\n            chartData.datasets[0].backgroundColor = \"#ff751a\";\n        } else if (score > 2) {\n            chartData.datasets[0].backgroundColor = \"#cc2900\";\n        } else {\n            chartData.datasets[0].backgroundColor = \"#e60000\";\n        }\n\n        const chartOptions = {\n            tooltips: {\n                callbacks: {\n                    title: function (tooltipItem, data) {\n                        return data['labels'][tooltipItem[0]['index']];\n                    },\n                    label: function (tooltipItem, data) {\n                        return data['datasets'][0]['data'][tooltipItem['index']];\n                    },\n                },\n                backgroundColor: '#FFF',\n                titleFontSize: 16,\n                titleFontColor: '#0066ff',\n                bodyFontColor: '#000',\n                bodyFontSize: 14,\n                displayColors: false,\n            },\n            legend: {\n                display: false,\n                labels: {\n                    fontColor: \"white\",\n                }\n            },\n            scales: {\n                yAxes: [{\n                    ticks: {\n                        display: false,\n                        fontColor: \"white\",\n                    },\n                    gridLines: {\n                        display: false,\n                        drawBorder: false\n                    }\n                }],\n                xAxes: [{\n                    display: false,\n                    barPercentage: 0.5,\n                    ticks: {\n                        display: false,\n                        fontColor: \"black\",\n                        fontSize: 14,\n                        min: 0,\n                        max: 12,\n                        stepSize: 1\n                    },\n                    gridLines: {\n                        display: false,\n                        drawBorder: false\n                    }\n                }]\n            },\n        }\n        this.setState({\n            chartData: chartData,\n            chartOptions: chartOptions\n        })\n    }\n\n    simplifyData = async (data) => {\n        let dance = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n        let energy = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n        let valence = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n        let danceArray = [];\n        let energyArray = [];\n        let valenceArray = [];\n        let danceIndex = 0;\n        let energyIndex = 0;\n        let valenceIndex = 0;\n        let n = 0;\n        data.audio_features.forEach(track => {\n            if (track.danceability < 0.05) {\n                dance[0]++;\n            } else if (0.05 < track.danceability < 0.1) {\n                dance[1]++;\n            } else if (0.1 < track.danceability < 0.15) {\n                dance[2]++;\n            } else if (0.15 < track.danceability < 0.2) {\n                dance[3]++;\n            } else if (0.2 < track.danceability < 0.25) {\n                dance[4]++;\n            } else if (0.25 < track.danceability < 0.3) {\n                dance[5]++;\n            } else if (0.3 < track.danceability < 0.35) {\n                dance[6]++;\n            } else if (0.35 < track.danceability < 0.4) {\n                dance[7]++;\n            } else if (0.4 < track.danceability < 0.45) {\n                dance[8]++;\n            } else if (0.45 < track.danceability < 0.55) {\n                dance[9]++;\n            } else if (0.5 < track.danceability < 0.55) {\n                dance[10]++;\n            } else if (0.55 < track.danceability < 0.6) {\n                dance[11]++;\n            } else if (0.6 < track.danceability < 0.65) {\n                dance[12]++;\n            } else if (0.65 < track.danceability < 0.7) {\n                dance[13]++;\n            } else if (0.7 < track.danceability < 0.75) {\n                dance[14]++;\n            } else if (0.75 < track.danceability < 0.8) {\n                dance[15]++;\n            } else if (0.8 < track.danceability < 0.85) {\n                dance[16]++;\n            } else if (0.85 < track.danceability < 0.9) {\n                dance[17]++;\n            } else if (0.9 < track.danceability < 0.95) {\n                dance[18]++;\n            } else if (0.95 < track.danceability < 1.0) {\n                dance[19]++;\n            }\n\n            if (track.energy < 0.05) {\n                energy[0]++;\n            } else if (0.05 < track.energy < 0.1) {\n                energy[1]++;\n            } else if (0.1 < track.energy < 0.15) {\n                energy[2]++;\n            } else if (0.15 < track.energy < 0.2) {\n                energy[3]++;\n            } else if (0.2 < track.energy < 0.25) {\n                energy[4]++;\n            } else if (0.25 < track.energy < 0.3) {\n                energy[5]++;\n            } else if (0.3 < track.energy < 0.35) {\n                energy[6]++;\n            } else if (0.35 < track.energy < 0.4) {\n                energy[7]++;\n            } else if (0.4 < track.energy < 0.45) {\n                energy[8]++;\n            } else if (0.45 < track.energy < 0.55) {\n                energy[9]++;\n            } else if (0.5 < track.energy < 0.55) {\n                energy[10]++;\n            } else if (0.55 < track.energy < 0.6) {\n                energy[11]++;\n            } else if (0.6 < track.energy < 0.65) {\n                energy[12]++;\n            } else if (0.65 < track.energy < 0.7) {\n                energy[13]++;\n            } else if (0.7 < track.energy < 0.75) {\n                energy[14]++;\n            } else if (0.75 < track.energy < 0.8) {\n                energy[15]++;\n            } else if (0.8 < track.energy < 0.85) {\n                energy[16]++;\n            } else if (0.85 < track.energy < 0.9) {\n                energy[17]++;\n            } else if (0.9 < track.energy < 0.95) {\n                energy[18]++;\n            } else if (0.95 < track.energy < 1.0) {\n                energy[19]++;\n            }\n\n            if (track.valence < 0.05) {\n                valence[0]++;\n            } else if (0.05 < track.valence < 0.1) {\n                valence[1]++;\n            } else if (0.1 < track.valence < 0.15) {\n                valence[2]++;\n            } else if (0.15 < track.valence < 0.2) {\n                valence[3]++;\n            } else if (0.2 < track.valence < 0.25) {\n                valence[4]++;\n            } else if (0.25 < track.valence < 0.3) {\n                valence[5]++;\n            } else if (0.3 < track.valence < 0.35) {\n                valence[6]++;\n            } else if (0.35 < track.valence < 0.4) {\n                valence[7]++;\n            } else if (0.4 < track.valence < 0.45) {\n                valence[8]++;\n            } else if (0.45 < track.valence < 0.55) {\n                valence[9]++;\n            } else if (0.5 < track.valence < 0.55) {\n                valence[10]++;\n            } else if (0.55 < track.valence < 0.6) {\n                valence[11]++;\n            } else if (0.6 < track.valence < 0.65) {\n                valence[12]++;\n            } else if (0.65 < track.valence < 0.7) {\n                valence[13]++;\n            } else if (0.7 < track.valence < 0.75) {\n                valence[14]++;\n            } else if (0.75 < track.valence < 0.8) {\n                valence[15]++;\n            } else if (0.8 < track.valence < 0.85) {\n                valence[16]++;\n            } else if (0.85 < track.valence < 0.9) {\n                valence[17]++;\n            } else if (0.9 < track.valence < 0.95) {\n                valence[18]++;\n            } else if (0.95 < track.valence < 1.0) {\n                valence[19]++;\n            }\n\n            // Find index of comparison song:\n            if (n === 0) {\n                danceIndex = dance.findIndex((val) => {\n                    return val >= 0.01;\n                });\n                energyIndex = energy.findIndex((val) => {\n                    return val >= 0.01;\n                });valenceIndex = valence.findIndex((val) => {\n                    return val >= 0.01;\n                });\n            }\n\n            danceArray.push(track.danceability);\n            energyArray.push(track.energy);\n            valenceArray.push(track.valence);\n            n++;\n        });\n\n        if (n < 20) {\n            this.setState({\n                errorVis: \"visible\"\n            })\n        }\n\n        let values = [data.audio_features[0].danceability, data.audio_features[0].energy, data.audio_features[0].valence];\n        let means = [danceArray.reduce((a,b) => a+b)/n, energyArray.reduce((a,b) => a+b)/n, valenceArray.reduce((a,b) => a+b)/n];\n        let stDevs = [Math.sqrt(danceArray.map(x => Math.pow(x-means[0],2)).reduce((a,b) => a+b)/n),\n            Math.sqrt(energyArray.map(x => Math.pow(x-means[1],2)).reduce((a,b) => a+b)/n),\n            Math.sqrt(valenceArray.map(x => Math.pow(x-means[2],2)).reduce((a,b) => a+b)/n)]\n        let sigmas = [];\n\n        for (let i = 0; i < 3; i++) {\n            if (stDevs[i] > 0.15) {\n                console.log(\"There is a high variance in the data.\")\n            }\n\n            console.log(\"Standard deviation: \" + stDevs[i]);\n            if ((means[i] - stDevs[i]) <= values[i] && values[i] <= (means[i] + stDevs[i])) {\n                sigmas[i] = 1;\n            } else if ((means[i] - (2 * stDevs[i])) <= values[i] && values[i] <= (means[i] + (2 * stDevs[i]))) {\n                sigmas[i] = 2;\n            } else {\n                sigmas[i] = 3;\n            }\n        }\n        let fit = {\n            stDevs,\n            sigmas\n        };\n\n        this.setState({\n            danceHist: <Histogram data={dance} songIndex={danceIndex}/>,\n            energyHist: <Histogram data={energy} songIndex={energyIndex}/>,\n            valenceHist: <Histogram data={valence} songIndex={valenceIndex}/>\n        })\n\n        console.log(fit);\n        return fit;\n    }\n\n    //CHANGE: get new audio data every time, or the user can't bookmark this page ///////////////////////////////////////////\n    render() {\n        return (\n            <div className=\"Main-play\" style={{backgroundColor: this.state.albumColours1}}>\n                <div style={{width: \"1vw\", marginLeft: \"-1vw\"}}>\n                    <BackgroundSvgPaths fill={this.state.albumColours2}/>\n                    <BackgroundSvgPaths fill={this.state.albumColours3} shiftDown=\"-100vh\"/>\n                    <BackgroundSvgPaths fill={this.state.albumColours4} shiftDown=\"100vh\"/>\n                    <BackgroundSvgPaths fill={this.state.albumColours2} shiftDown=\"200vh\"/>\n                </div>\n                <div>\n                    <div className=\"Container-play\">\n                        <div style={{display: \"flex\", margin: \"0vh\", fontSize: \"2.5vh\", padding: \"0vh\", textAlign: \"left\", paddingLeft: \"3vh\", alignContent: \"left\", color: \"red\", visibility: this.state.errorVis}}><ErrorOutlineIcon style={{paddingRight: \"0.3vw\"}} />This playlist has less than 20 songs. Choose a playlist with more songs for a more accurate analysis.</div>\n                        <div>\n                            <h2>{this.props.location.state.name}</h2>\n                            <h2>{this.props.location.state.artist}</h2>\n                            <p/>\n                            <p style={{backgroundColor: \"white\", padding: \"0vh\", paddingLeft: \"0.25vw\", margin: \"1vw\"}}>\n                                <HorizontalBar data={this.state.chartData} options={this.state.chartOptions} height=\"60vh\"/>\n                            </p>\n                            <p>\n                                <p style={{fontSize: \"6vh\"}}>{Math.round((this.state.score/12) * 100)}% Fit!</p>\n                            </p>\n                        </div>\n                        <div style={{margin: \"0hv\", padding: \"0vh\", justifyContent: \"center\", display: \"flex\"}}>\n                            <p>\n                                <img src={this.props.location.state.art} style={{margin: \"2vh\", height: \"auto\", width: \"45vh\", border: \"0.3vh solid dimgrey\"}}/>\n                            </p>\n                        </div>\n                        <div className=\"Chart-play\">\n                            <p>{this.state.danceHist}</p>\n                        </div>\n                        <div>\n                            <h2>Danceability:<h2 style={{color: this.state.featureInfoColour[0]}}>{this.state.featureInfo1[0]}</h2></h2>\n                            <hr/>\n                            <p>{this.state.featureInfo2[0]}</p>\n                        </div>\n                        <div>\n                            <p>{this.state.energyHist}</p>\n                        </div>\n                        <div>\n                            <h2>Energy:<h2 style={{color: this.state.featureInfoColour[1]}}>{this.state.featureInfo1[1]}</h2></h2>\n                            <hr/>\n                            <p>{this.state.featureInfo2[1]}</p>\n                        </div>\n                        <div>\n                            <p>{this.state.valenceHist}</p>\n                        </div>\n                        <div>\n                            <h2>Positivity:<h2 style={{color: this.state.featureInfoColour[2]}}>{this.state.featureInfo1[2]}</h2></h2>\n                            <hr/>\n                            <p>{this.state.featureInfo2[2]}</p>\n                        </div>\n                        <div id=\"Detail\">\n                            <h2>Mood features explained:</h2>\n                            <hr/>\n                            <p>All mood feature data is taken from Spotify, who use algorithms to calculate the numbers shown.</p>\n                            <h2>Energy</h2>\n                            <p>\n                                The 'Energy' of a song determines how energetic the song feels, and is a measure of intensity and musical activity, with energetic\n                                tracks feeling fast, busy and noisy. Energy is calculated by taking into account the dynamic range,\n                                the loudness, the timbre, and the onset rate (rate of notes played). Energy is determined on a scale of 0 - 10,\n                                with 10 being the most energetic.\n                            </p>\n                            <p>\n                                The standard deviation of Energy values for the songs in this playlist is {this.state.fit.stDevs[1].toFixed(3)}.\n                                The Energy of your song falls within {this.state.fit.sigmas[1]}  (sigma) of the distribution.\n                            </p>\n                            <h2>Danceability</h2>\n                            <p>\n                                The 'Danceability' of a song describes how good a track is to dance to. This takes into account\n                                a number of musical elements including tempo, how stable the rhythm is, the strength of each beat,\n                                and how regular the musical pattern is. Dancibility is determined on a scale of 0 - 10, with 10 being\n                                the most danceable.\n                            </p>\n                            <p>\n                                The standard deviation of Danceability values for the songs in this playlist is {this.state.fit.stDevs[0].toFixed(3)}.\n                                The danceability of your song falls within {this.state.fit.sigmas[0]}  (sigma) of the distribution.\n                            </p>\n                            <h2>Happiness</h2>\n                            <p>\n                                The happiness or 'Valence' of a song is how positive it sounds. Tracks with high valence sound more positive\n                                (happy, cheerful, euphoric) while tracks with low valence sound more negative (sad, depressed, angry).\n                                Happiness is determined on a scale of 0 - 10, with 10 being the most positive sounding.\n                            </p>\n                            <p>\n                                The standard deviation of Positivity values for the songs in this playlist is {this.state.fit.stDevs[2].toFixed(3)}.\n                                The Positivity of your song falls within {this.state.fit.sigmas[2]}  (sigma) of the distribution.\n                            </p>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default PlaylistResultsPage;","import React from 'react';\nimport {BrowserRouter as Router, Route, Redirect, Switch} from \"react-router-dom\";\nimport HomePage from \"./routes/HomePage\";\nimport SongSearchPage from \"./routes/SongSearchPage\";\nimport SongPage from \"./routes/SongPage\";\nimport PlaylistPage from \"./routes/PlaylistPage\";\nimport PlaylistSearchPage from \"./routes/PlaylistSearchPage\";\nimport AboutPage from \"./routes/AboutPage\";\nimport SongResultsPage from \"./routes/SongResultsPage\";\nimport PlaylistResultsPage from \"./routes/PlaylistResultsPage\";\nimport './styles/App.css';\nimport BackgroundSvgPaths from \"./components/BackgroundSvgPaths\";\n\n/**\n * Main page of the app. Only handles routing, then gets passed to index.js for rendering.\n */\nclass App extends React.Component {\n    constructor() {\n        super();\n    }\n\n    render() {\n        return (\n            <Router>\n                <nav className=\"Navbar\">\n                    <ul>\n                        <li style={{float: \"left\", fontSize: \"3vh\"}}><a href=\"#home\">SongMap</a></li>\n                        <li><a href=\"#news\">News</a></li>\n                        <li><a href=\"#contact\">Contact</a></li>\n                        <li><a href=\"#about\">About</a></li>\n                    </ul>\n                </nav>\n                <Switch>\n                    <Route path=\"/\" exact component={HomePage}/>\n                    <Route path=\"/songs\" component={SongResultsPage}/>\n                    <Route path=\"/playlists\" component={PlaylistResultsPage}/>\n                    <Route path=\"/song-playlist\" component={PlaylistSearchPage}/>\n                    <Route path=\"/about\" component={AboutPage}/>\n                    <Route path=\"/bgtest\" component={BackgroundSvgPaths}/>\n                    <Route path=\"/song\"   render={(props) => (\n                        <SongSearchPage {...props} chain=\"song\" />\n                    )}/>\n                    <Route path=\"/playlist\" render={(props) => (\n                        <SongSearchPage {...props} chain=\"playlist\" />\n                    )}/>\n                </Switch>\n            </Router>\n        )\n    }\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './styles/index.css';\nimport SongSearchPage from './routes/SongSearchPage';\nimport * as serviceWorker from './serviceWorker';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = __webpack_public_path__ + \"static/media/hellify.aede5c89.png\";"],"sourceRoot":""}