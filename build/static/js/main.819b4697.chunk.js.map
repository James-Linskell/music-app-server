{"version":3,"sources":["serviceWorker.js","components/BackgroundSvgPaths.js","routes/HomePage.js","Helpers/FetchData.js","components/SongCard.js","Helpers/GenerateInfo.js","routes/SongSearchPage.js","routes/PlaylistSearchPage.js","routes/AboutPage.js","routes/ContactPage.js","Helpers/LightenColours.js","routes/SongResultsPage.js","components/Histogram.js","routes/PlaylistResultsPage.js","routes/NotFound.js","App.js","index.js","hellify.png"],"names":["Boolean","window","location","hostname","match","BackgroundSvgPaths","className","viewBox","style","top","this","props","shiftDown","fill","d","React","Component","HomePage","display","justifyContent","margin","src","hellify","alt","to","FetchData","getToken","a","fetch","response","json","body","status","Error","message","fetchData","input","type","searchType","data","requestToken","token","myToken","myOptions","headers","Authorization","url","replace","SongCard","onClick","buttonClick","artwork","name","album","artist","GenerateInfo","playlists","forEach","playlist","push","playlistId","id","songs","song","artists","art","images","songId","SongSearchPage","handleSubmit","event","preventDefault","state","searchQuery","setState","previousSearchQuery","waitForFetch","setTimeout","prompt","clearTimeout","songListRaw","tracks","items","length","results","generateSongInfo","simplifiedSongList","populateGrid","title","searchTitle","handleChange","bind","onCardClick","nextProps","nextContext","clicked","console","log","chain","target","value","history","pathname","search","cardGrid","i","substring","key","onSubmit","placeholder","onChange","marginTop","position","PlaylistSearchPage","playlistsRaw","generatePlaylistInfo","playlistIds","gridGap","propsToState","hash","plId","width","height","frameBorder","allowTransparency","allow","AboutPage","ContactPage","LightenColours","RGB_Linear_Shade","p","c","parseInt","r","Math","round","split","b","t","P","slice","LightTooltip","withStyles","theme","tooltip","backgroundColor","palette","common","white","color","boxShadow","shadows","lineHeight","textAlign","arrow","Tooltip","SongResultsPage","componentDidMount","waitForFeatures","waitFortrack","waitForAlbum","generateCharts","setBgColours","invalid","rawTrack","embedAlbum","method","JSON","stringify","sortTrackData","songCard","explicit","expl","rawFeatures","live","acoustic","instrumental","musicality","mode","modality","rawAlbum","rawAnalysis","available_markets","options","bgImage","albumColours1","albumColours2","albumColours3","albumColours4","img","document","querySelector","crossOrigin","colorThief","ColorThief","addEventListener","getColor","Vibrant","getPalette","then","rgb1","getRgb","rgb2","DarkVibrant","rgb3","DarkMuted","rgb4","Muted","marginLeft","fontSize","padding","paddingLeft","alignContent","paddingRight","marginBottom","enterTouchDelay","tempo","time_signature","acousticness","liveness","speechiness","popularity","duration_ms","toFixed","paddingBottom","release_date","album_type","label","marginRight","geography","geographies","map","geo","find","s","properties","ISO_A2","rsmKey","Histogram","generateChart","songIndex","generateScore","userAgentString","navigator","userAgent","firefoxAgent","indexOf","chartOptions","responsive","scales","xAxes","scaleLabel","labelString","histogram","chartData","PlaylistResultsPage","waitFortracks","plTracks","plTrackIds","n","track","featureData","sortData","score","finalScore","featureInfo1","featureInfo2","featureInfoColour","fit","simplify","danceHist","datasets","dance","index","danceIndex","energyHist","energy","energyIndex","valenceHist","valence","valenceIndex","errorVis","stDevs","sigmas","visibility","border","NotFound","App","float","path","exact","component","render","ReactDOM","StrictMode","getElementById","serviceWorker","ready","registration","unregister","catch","error","module","exports"],"mappings":"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","file":"static/js/main.819b4697.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. SongSearchPage is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport \"../styles/BackgroundSvgPaths.css\";\n\n\nclass BackgroundSvgPaths extends React.Component {\n    render() {\n        return (\n            <div className=\"background\">\n                <svg viewBox=\"0 0 1920 2140\" style={{top: this.props.shiftDown}}>\n                    <path fill={this.props.fill}\n                          d=\"M 0.00,1811.00\n           C 0.00,1811.00 0.00,1214.00 0.00,1214.00\n             0.00,1214.00 0.99,1206.61 0.99,1206.61\n             0.99,1206.61 9.00,1201.00 9.00,1201.00\n             9.00,1201.00 25.00,1191.20 25.00,1191.20\n             25.00,1191.20 107.00,1141.20 107.00,1141.20\n             107.00,1141.20 449.00,932.80 449.00,932.80\n             449.00,932.80 726.00,763.81 726.00,763.81\n             726.00,763.81 1059.00,560.81 1059.00,560.81\n             1059.00,560.81 1328.00,396.81 1328.00,396.81\n             1328.00,396.81 1450.00,322.58 1450.00,322.58\n             1450.00,322.58 1595.00,234.19 1595.00,234.19\n             1595.00,234.19 1776.00,123.80 1776.00,123.80\n             1776.00,123.80 1875.00,63.40 1875.00,63.40\n             1875.00,63.40 1904.00,45.80 1904.00,45.80\n             1904.00,45.80 1920.00,37.00 1920.00,37.00\n             1920.00,37.00 1920.00,633.00 1920.00,633.00\n             1920.00,633.00 1918.98,640.82 1918.98,640.82\n             1918.98,640.82 1911.00,647.00 1911.00,647.00\n             1911.00,647.00 1895.00,656.80 1895.00,656.80\n             1895.00,656.80 1814.00,706.05 1814.00,706.05\n             1814.00,706.05 1670.00,793.81 1670.00,793.81\n             1670.00,793.81 1470.00,915.80 1470.00,915.80\n             1470.00,915.80 1271.00,1037.19 1271.00,1037.19\n             1271.00,1037.19 961.00,1226.19 961.00,1226.19\n             961.00,1226.19 628.00,1429.19 628.00,1429.19\n             628.00,1429.19 465.00,1528.42 465.00,1528.42\n             465.00,1528.42 155.00,1717.42 155.00,1717.42\n             155.00,1717.42 51.00,1780.81 51.00,1780.81\n             51.00,1780.81 18.00,1801.00 18.00,1801.00\n             18.00,1801.00 0.00,1811.00 0.00,1811.00 Z\" />\n                </svg>\n            </div>\n        )\n    }\n}\n\nexport default BackgroundSvgPaths;","import React from 'react';\nimport { Router, Link } from \"react-router-dom\";\nimport hellify from \"../hellify.png\";\nimport '../styles/HomePage.css';\nimport BackgroundSvgPaths from \"../components/BackgroundSvgPaths\";\n\n/**\n * Takes song data as props and produces card elements for all data entered. Renders the card grid to he DOM.\n */\nclass HomePage extends React.Component {\n    render() {\n        return (\n            <div className=\"App\">\n                <header className=\"App-header\">\n                    <div style={{display: \"flex\", justifyContent: \"center\", margin: \"4vh\"}}>\n                        <img src={hellify} className=\"Logo\" alt=\"logo\"/>\n                    </div>\n                    <div className=\"Container-home\">\n                        <div className=\"Container-box\">\n                            <div>\n                                <h1>Song Analyser</h1>\n                                <h3>Explore your song</h3>\n                                <p>\n                                    Discover detailed analytics for your music.\n                                    Go deeper and find out what Spotify's algorithms say about your songs!\n                                </p>\n                                <Link to=\"/song\" >\n                                    <button>Analyse a song</button>\n                                </Link>\n                            </div>\n                        </div>\n                        <div className=\"Container-box\">\n                            <div>\n                                <h1>Playlist Analyser</h1>\n                                <h3>Find the right playlist for your song</h3>\n                                <p>\n                                    Choose a song and see how well it fits in a chosen playlist.\n                                </p>\n                                <Link to=\"/playlist\">\n                                    <button>Analyse a playlist</button>\n                                </Link>\n                                <p/>\n                            </div>\n                        </div>\n                    </div>\n                </header>\n            </div>\n        );\n    }\n}\n\nexport default HomePage;","/**\n * Helper class with methods which formulate and make calls to the spotify web API.\n */\nclass FetchData {\n    /**\n     * Calls my node server which requests a Spotify client access token.\n     * @returns {Promise} Json body containing Spotify client token and test message\n     */\n    static getToken = async () => {\n        const response = await fetch('/authenticate');\n        const body = await response.json();\n\n        if (response.status !== 200) {\n            throw Error(body.message)\n        }\n        return body;\n    };\n    /**\n     * Calls Spotify API using client access token. Takes an input string, a call type string (search or analysis) and a string\n     * for search type ('tracks/artists/playlists' for searches or 'audio-features/?ids=' for audio data).\n     * @returns {Promise} Spotify search or audio analysis data\n     */\n    static fetchData = async (input, type, searchType) => {\n        let data = '';\n        const requestToken = await this.getToken();\n        const token = requestToken.myToken;\n        var myOptions = {\n            headers: {\n                Authorization: 'Bearer ' + token\n            }\n        }\n        let url = \"\";\n        if (type === \"search\") {\n            // Replaces special characters in query:\n            input = input.replace(/\\\\|#|%|{|}|\\^|\\||`/g, \"\")\n            const endpoint = 'https://api.spotify.com/v1/search?';\n            const query = 'q=' + input;\n            const type = '&type=' + searchType;\n            url = endpoint + query + type;\n        } else if (type === \"analysis\") {\n            const endpoint = 'https://api.spotify.com/v1/';\n            const ty = searchType;\n            const id = input;\n            url = endpoint + ty + id;\n        }\n        const response = await fetch(url, myOptions)\n        data = await response.json();\n        return data;\n    }\n}\n\nexport default FetchData;","import React from 'react';\nimport '../styles/SongCard.css';\n\nclass SongCard extends React.Component {\n    onCardClick() {\n        //console.log(this.props.name)\n    }\n\n    render() {\n        return (\n            <div className=\"Result-card\" onClick={this.props.buttonClick}>\n                <div className=\"Container-song\">\n                    <div>\n                        <img className=\"Album-art\" src={this.props.artwork} alt=\"album artwork\"></img>\n                    </div>\n                    <div className=\"Song-info\">\n                            <p className=\"Info-name\" >{this.props.name}</p>\n                            <p className=\"Info\" >{this.props.album}</p>\n                            <p className=\"Info\">{this.props.artist}</p>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n\n}\n\nexport default SongCard;","class GenerateInfo {\n    static generatePlaylistInfo(data) {\n        const playlists = []\n\n        data.forEach(playlist => {\n                playlists.push({\n                    playlistId: playlist.id\n                });\n            }\n        );\n        return playlists;\n    }\n\n    static generateSongInfo(data) {\n        const songs = []\n\n        data.forEach(song => {\n                songs.push({\n                    name: song.name,\n                    artist: song.artists[0].name,\n                    album: song.album.name,\n                    art: song.album.images[1].url,\n                    songId: song.id\n                });\n            }\n        );\n        return songs;\n    }\n}\n\nexport default GenerateInfo;","import React from 'react';\nimport hellify from '../hellify.png';\nimport '../styles/SearchPage.css';\nimport { BrowserRouter as Router, Route } from 'react-router-dom';\nimport FetchData from '../Helpers/FetchData';\nimport SongCard from \"../components/SongCard\";\nimport GenerateInfo from '../Helpers/GenerateInfo'\n\nclass SongSearchPage extends React.Component {\n  /**\n   * Default constructor for main app.\n   * @param props\n   */\n  constructor(props) {\n    super(props);\n    this.state = {\n      token: 'NO_TOKEN(CLIENT)',\n      songListRaw: null,\n      simplifiedSongList: null,\n      searchQuery: '',\n      previousSearchQuery: '',\n      results: <div className=\"Margin\" ></div>,\n      prompt: null,\n      title: \"\",\n      searchTitle: \"Search for a song to get started.\"\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.onCardClick = this.onCardClick.bind(this);\n  }\n\n  componentWillReceiveProps(nextProps, nextContext) {\n    if (nextProps.clicked === true) {\n      console.log(\"RELOADED\");\n    }\n  }\n\n\n  componentDidMount() {\n    if (this.props.chain === \"song\") {\n      this.setState({\n        title: \"Song Analyser\",\n      });\n    } else {\n      this.setState({\n        title: \"Playlist Analyser\",\n        searchTitle: \"First choose a playlist, then choose a song. Search for a song to get started.\"\n      });\n    }\n  }\n\n  /**\n   * Updates the state {searchQuery} whenever a letter is typed in the search box.\n   * @param onChange event for search box input\n   */\n  handleChange(event) {\n    this.setState({ searchQuery: event.target.value });\n  }\n\n  /**\n   * Handles submit of search query.\n   * @param onSubmit event for search submit.\n   */\n  handleSubmit = event => {\n    event.preventDefault();\n    // Don't fetch if there is no query:\n    if (this.state.searchQuery === \"\") {\n      return;\n    }\n    this.setState({previousSearchQuery: this.state.searchQuery})\n    if (this.state.searchQuery == this.state.previousSearchQuery) {\n      return\n    }\n\n    this.waitForFetch();\n  }\n\n  waitForFetch = async () => {\n    // Set timeout for 'searching' message to appear:\n    setTimeout(() => {\n      this.setState({\n        prompt: \"Searching for results...\"\n      });\n    }, 1000);\n    // Get search results:\n    const data = await FetchData.fetchData(this.state.searchQuery, 'search','track');\n    // Clear all timeouts (as search is complete):\n    let id = setTimeout(function() {}, 0);\n    while (id--) {\n      window.clearTimeout(id);\n      this.setState({\n        prompt: null\n      });\n    }\n    // Set state to returned data:\n    this.setState({songListRaw: data})\n    // Error handling if no search results are returned:\n    if (data.tracks.items.length === 0) {\n      this.setState({\n        prompt: \"No results found!\",\n        results: <div className=\"Margin\" ></div>\n      });\n      return;\n    }\n    const songs = GenerateInfo.generateSongInfo(this.state.songListRaw.tracks.items);\n    this.setState({simplifiedSongList: songs});\n    this.setState({\n      results:\n          <div className=\"Cards\" >\n            {this.populateGrid(this.state.simplifiedSongList)}\n          </div>\n    })\n  };\n\n  /**\n   * When a song card is clicked, redirect to the results page passing the song id as the react router\n   * history object prop 'props.location.search'.\n   * @param songId\n   */\n  onCardClick(songId, name, album, artist, art) {\n    if (this.props.chain === \"song\") {\n      this.props.history.push({\n        pathname: '/songs',\n        search: songId\n      });\n    }\n    if (this.props.chain === \"playlist\") {\n      this.props.history.push({\n        pathname: '/song-playlist',\n        search: songId,\n        state: {\n          name: name,\n          album: album,\n          artist: artist,\n          art: art\n        }\n      });\n    }\n  }\n\n  populateGrid(data) {\n    // Else generate cards.\n    if (data == null) {\n      return null;\n    }\n    var cardGrid = [];\n    for (var i=0; i < data.length; i++) {\n\n      let name = data[i].name;\n      let album = data[i].album;;\n      let artist = data[i].artist;\n      let songId = data[i].songId;\n      // Truncate info if it is too long to fit on card:\n      if (data[i].name.length > 30) {\n        name = data[i].name.substring(0, 30) + '...'\n      }\n      if (data[i].album.length > 20) {\n        album = data[i].album.substring(0, 20) + '...'\n      }\n      if (data[i].artist.length > 40) {\n        artist = data[i].artist.substring(0, 40) + '...'\n      }\n\n      cardGrid.push(\n          <p key={i} className=\"Card-p\"><SongCard\n              buttonClick={this.onCardClick.bind(this, songId, name, album, artist, data[i].art)}\n              name={name}\n              album={album}\n              artist={artist}\n              artwork={data[i].art}\n              songId={songId}\n          /></p>\n      )\n    }\n    return cardGrid;\n  }\n\n  /**\n   * Renders main page to the DOM.\n   */\n  render() {\n    return (\n        <Router>\n          <div className=\"Search\">\n            <header className=\"Search-header\" >\n              <p className=\"Title\">{this.state.title}</p>\n              <img src={hellify} className=\"Search-logo\" alt=\"logo\"/>\n              <p>{this.state.searchTitle}</p>\n              <div className=\"searchbar\">\n                <form onSubmit={this.handleSubmit}>\n                  <input className=\"Search-box\" type=\"text\" value={this.state.value} placeholder=\"Search..\" onChange={this.handleChange}></input>\n                  <button id=\"searchclick\" type=\"submit\">Search</button>\n                </form>\n              </div>\n              <div style={{marginTop: \"3vh\", position: \"absolute\", top: \"50vh\"}}>\n                {this.state.prompt}\n              </div>\n            </header>\n            <div style={{marginTop: \"4vh\"}}>\n              {this.state.results}\n            </div>\n          </div>\n        </Router>\n    );\n  }\n}\n\nexport default SongSearchPage;\n","import React from 'react';\nimport hellify from '../hellify.png';\nimport '../styles/SearchPage.css';\nimport { BrowserRouter as Router, Route } from 'react-router-dom';\nimport FetchData from '../Helpers/FetchData';\nimport SongCard from \"../components/SongCard\";\nimport GenerateInfo from \"../Helpers/GenerateInfo\";\n\nclass PlaylistSearchPage extends React.Component {\n    /**\n     * Default constructor for main app.\n     * @param props\n     */\n    constructor(props) {\n        super(props);\n        this.state = {\n            token: 'NO_TOKEN(CLIENT)',\n            playlistsRaw: null,\n            playlistIds: null,\n            searchQuery: '',\n            previousSearchQuery: '',\n            results: <div className=\"Margin\"></div>,\n            prompt: null,\n            propsToState: \"\"\n        };\n        this.handleChange = this.handleChange.bind(this);\n        this.handleSubmit = this.handleSubmit.bind(this);\n        this.onCardClick = this.onCardClick.bind(this);\n    }\n\n    componentDidMount() {\n        if (typeof this.props.location.state !== \"undefined\") {\n            this.setState({propsToState: this.props.location.state})\n            return;\n        } else {\n            this.props.history.push({\n                    pathname: '/404',\n                }\n            );\n        }\n    }\n\n    /**\n     * Updates the state {searchQuery} whenever a letter is typed in the search box.\n     * @param onChange event for search box input\n     */\n    handleChange(event) {\n        this.setState({ searchQuery: event.target.value });\n    }\n\n    /**\n     * Handles submit of search query.\n     * @param onSubmit event for search submit.\n     */\n    handleSubmit = event => {\n        event.preventDefault();\n        // Don't fetch if there is no query:\n        if (this.state.searchQuery === \"\") {\n            return;\n        }\n        this.setState({previousSearchQuery: this.state.searchQuery})\n        if (this.state.searchQuery == this.state.previousSearchQuery) {\n            return\n        }\n\n        this.waitForFetch();\n    }\n\n    waitForFetch = async () => {\n        // Set timeout for 'searching' message to appear:\n        setTimeout(() => {\n            this.setState({\n                prompt: \"Searching for results...\"\n            });\n        }, 1000);\n        // Fetch search data:\n        const data = await FetchData.fetchData(this.state.searchQuery,'search','playlist');\n        // Clear all timeouts (as search is complete):\n        let id = setTimeout(function() {}, 0);\n        while (id--) {\n            window.clearTimeout(id);\n            this.setState({\n                prompt: null\n            });\n        }\n        // Set state to returned data:\n        this.setState({playlistsRaw: data})\n        // Error handling if no search results are returned:\n        if (data.playlists.items.length === 0) {\n            this.setState({\n                prompt: \"No results found!\",\n                results: <div className=\"Margin\" ></div>\n            });\n            return;\n        }\n        const playlists = GenerateInfo.generatePlaylistInfo(this.state.playlistsRaw.playlists.items);\n        this.setState({playlistIds: playlists});\n        this.setState({\n            results:\n                <div className=\"Cards\" style={{gridGap: \"5vh\"}}>\n                    {this.populateGrid(this.state.playlistIds)}\n                </div>\n        })\n    };\n\n    /**\n     * When a song card is clicked, redirect to the results page passing the song id as the react router\n     * history object prop 'props.location.search'.\n     * @param songId\n     */\n    onCardClick(playlistId, name, album, artist, art) {\n        this.props.history.push({\n            pathname: '/playlists',\n            search: this.props.location.search,\n            hash: playlistId,\n            state: {\n                name: name,\n                album: album,\n                artist: artist,\n                art: art\n            }\n        });\n    }\n\n    populateGrid(data) {\n        // Else generate cards.\n        if (data == null) {\n            return null;\n        }\n        var cardGrid = [];\n        for (var i=0; i < data.length / 2; i++) {\n\n            let plId = data[i].playlistId;\n\n            cardGrid.push(\n                <p className=\"Playlist-p\" key={i}>\n                    <h2 onClick={this.onCardClick.bind(this, plId,\n                        this.state.propsToState.name,\n                        this.state.propsToState.album,\n                        this.state.propsToState.artist,\n                        this.state.propsToState.art\n                    )}>\n                        Select Playlist\n                    </h2>\n                    <p className=\"Playlist-p\" >\n                        <iframe\n                            src={\"https://open.spotify.com/embed/playlist/\" + plId}\n                            width=\"350\"\n                            height=\"350\"\n                            frameBorder=\"0\"\n                            allowTransparency=\"true\"\n                            allow=\"encrypted-media\"\n                        ></iframe>\n                    </p>\n                </p>\n            )\n        }\n        return cardGrid;\n    }\n\n    /**\n     * Renders main page to the DOM.\n     */\n    render() {\n        return (\n            <Router>\n                <div className=\"Search\">\n                    <header className=\"Search-header\" >\n                        <div className=\"Grid\">\n                            <div>\n                                <p>\n                                    <img src={hellify} className=\"Search-logo\" alt=\"logo\"/>\n                                </p>\n                                <p>Search for a playlist</p>\n                                <p></p>\n                                <div className=\"searchbar\">\n                                    <form onSubmit={this.handleSubmit}>\n                                        <input className=\"Search-box\" type=\"text\" value={this.state.value} placeholder=\"Search..\" onChange={this.handleChange}></input>\n                                        <button id=\"searchclick\" type=\"submit\">Search</button>\n                                    </form>\n                                </div>\n                            </div>\n                            <div>\n                                <p>Song being analysed:</p>\n                                <p className=\"Card-p\"><SongCard\n                                    name={this.state.propsToState.name}\n                                    album={this.state.propsToState.album}\n                                    artist={this.state.propsToState.artist}\n                                    artwork={this.state.propsToState.art}\n                                    songId={this.state.propsToState.songId}\n                                /></p>\n                            </div>\n                        </div>\n                        <div style={{marginTop: \"3vh\", position: \"absolute\", top: \"50vh\"}}>\n                            {this.state.prompt}\n                        </div>\n                    </header>\n                    {this.state.results}\n                    <div id=\"footer\" style={{height: \"36.6vh\"}}/>\n                </div>\n            </Router>\n        );\n    }\n}\n\nexport default PlaylistSearchPage;","import React from 'react';\nimport '../styles/AboutPage.css';\n\nclass AboutPage extends React.Component {\n    render() {\n        return (\n            <div className=\"About\">\n                <div>404 Not Found</div>\n                <div>Oops! Something went wrong. Go back to the home page to continue.</div>\n            </div>\n        )\n    }\n}\n\nexport default AboutPage;","import React from 'react';\nimport '../styles/ContactPage.css';\n\nclass ContactPage extends React.Component {\n    render() {\n        return (\n            <div className=\"Contact\">\n                <div>404 Not Found</div>\n                <div>Oops! Something went wrong. Go back to the home page to continue.</div>\n            </div>\n        )\n    }\n}\n\nexport default ContactPage;","class LightenColours {\n    static RGB_Linear_Shade=(p,c)=>{\n        var i=parseInt,r=Math.round,[a,b,c,d]=c.split(\",\"),P=p<0,t=P?0:255*p,P=P?1+p:1-p;\n        return\"rgb\"+(d?\"a(\":\"(\")+r(i(a[3]==\"a\"?a.slice(5):a.slice(4))*P+t)+\",\"+r(i(b)*P+t)+\",\"+r(i(c)*P+t)+(d?\",\"+d:\")\");\n    }\n}\n\nexport default LightenColours;","import React from 'react';\nimport FetchData from \"../Helpers/FetchData\";\nimport \"../styles/SongResultsPage.css\";\nimport {HorizontalBar} from 'react-chartjs-2';\nimport SongCard from \"../components/SongCard\";\nimport { ComposableMap, Geographies, Geography } from \"react-simple-maps\"\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport { withStyles } from '@material-ui/core/styles';\nimport InfoOutlinedIcon from '@material-ui/icons/InfoOutlined';\nimport ColorThief from \"color-thief\";\nimport * as Vibrant from \"node-vibrant\";\nimport BackgroundSvgPaths from \"../components/BackgroundSvgPaths\";\nimport LightenColours from \"../Helpers/LightenColours\";\n\n/**\n * Styles the Material-UI tooltips used on the page.\n * @type {React.ComponentType<Omit<JSX.LibraryManagedAttributes<*, React.ComponentProps<*>>, keyof ({theme: Theme} & {classes: ClassNameMap<ClassKeyOfStyles<\"arrow\"|\"tooltip\">>}) | {classes: ClassNameMap<ClassKeyOfStyles<\"arrow\"|\"tooltip\">>}> & StyledComponentProps<\"arrow\"|\"tooltip\">>}\n */\nconst LightTooltip = withStyles((theme) => ({\n    tooltip: {\n        backgroundColor: theme.palette.common.white,\n        color: 'rgba(0, 0, 0, 0.87)',\n        boxShadow: theme.shadows[1],\n        lineHeight: \"25px\",\n        textAlign: \"center\",\n    },\n    arrow: {\n        color: theme.palette.common.white,\n    }\n}))(Tooltip);\n\nclass SongResultsPage extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            rawFeatures: [],\n            rawAnalysis: [],\n            rawTrack: {\n                album: {\n                    id: \"null\"\n                },\n                available_markets: []\n            },\n            rawAlbum: [],\n            data: [],\n            options: [],\n            prompt: null,\n            invalid: false,\n            modality: \"\",\n            songCard: null,\n            bgImage: null,\n            explicit: null,\n            live: null,\n            instrumental: null,\n            musicality: null,\n            key: null,\n            artists: null,\n            albumColours1: \"white\",\n            albumColours2: \"white\",\n            albumColours3: \"white\",\n            albumColours4: \"white\",\n            embedAlbum: null,\n        }\n    }\n\n    componentDidMount = async () =>  {\n        await this.waitForFeatures();\n        await this.waitFortrack();\n        await this.waitForAlbum();\n        this.generateCharts();\n        this.setBgColours();\n    }\n\n    /**\n     * Pulls colour palette from the album artwork for the chosen song using Vibrant library, then sets the most prominent\n     * colours to the page state. These colours are then rendered as the background once the promise has been fulfilled.\n     */\n    setBgColours() {\n        // Get bg colours using Vibrant promise:\n        const img = document.querySelector('img');\n        img.crossOrigin = \"Anonymous\";\n        const colorThief = new ColorThief();\n        // Make sure image is finished loading\n        img.addEventListener('load', function() {\n            let colour = colorThief.getColor(img);\n            Vibrant.from(img).getPalette()\n                .then((palette) => {\n                    console.log(palette);\n                    let rgb1 = palette.Vibrant.getRgb();\n                    let rgb2 = palette.DarkVibrant.getRgb();\n                    let rgb3 = palette.DarkMuted.getRgb();\n                    let rgb4 = palette.Muted.getRgb();\n                    rgb1 = LightenColours.RGB_Linear_Shade(0.3, (\"rgb(\" + rgb1[0] + \",\" + rgb1[1] + \",\" + rgb1[2] + \")\"));\n                    rgb2 = LightenColours.RGB_Linear_Shade(0.3, (\"rgb(\" + rgb2[0] + \",\" + rgb2[1] + \",\" + rgb2[2] + \")\"));\n                    rgb3 = LightenColours.RGB_Linear_Shade(0.3, (\"rgb(\" + rgb3[0] + \",\" + rgb3[1] + \",\" + rgb3[2] + \")\"));\n                    rgb4 = LightenColours.RGB_Linear_Shade(0.3, (\"rgb(\" + rgb4[0] + \",\" + rgb4[1] + \",\" + rgb4[2] + \")\"));\n                    this.setState({\n                        albumColours1: rgb1,\n                        albumColours2: rgb2,\n                        albumColours3: rgb3,\n                        albumColours4: rgb4\n                    })}\n                )\n        }.bind(this));\n    }\n\n    /**\n     * Fetches track data from my API, pre-processes the data, and generates a song card of the data.\n     */\n    waitFortrack = async () => {\n        const songId = this.props.location.search;\n        const data = await FetchData.fetchData(songId.substring(1, songId.length), 'analysis', 'tracks/');\n        // Error handling if no search results are returned:\n        if (data.length === 0) {\n            this.setState({\n                prompt: \"Invalid song ID\",\n                invalid: true\n            });\n            return;\n        }\n        this.setState({\n            rawTrack: data,\n            embedAlbum: <iframe\n                src={\"https://open.spotify.com/embed/album/\" + data.album.id}\n                width=\"350\"\n                height=\"350\"\n                frameBorder=\"0\"\n                allowTransparency=\"true\"\n                allow=\"encrypted-media\"\n            ></iframe>\n        });\n\n        // Fetch my API endpoint for sorting and truncating track data for song card:\n        const sortTrackData = await fetch('/api/songSort/truncate', {\n            method: 'POST',\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(data)\n        });\n        let response = await sortTrackData.json();\n\n        // Generate songcard and save it to state:\n        this.setState({\n            songCard: <SongCard\n                name={response.name}\n                album={response.album}\n                artist={response.artist}\n                artwork={this.state.rawTrack.album.images[1].url}\n            />,\n            explicit: response.expl,\n            artists: response.artists,\n        })\n\n    };\n\n    /*\n * todo:\n *  refactor some of this to helper\n */\n    waitForFeatures = async () => {\n        const songId = this.props.location.search;\n        const data = await FetchData.fetchData(songId.substring(1, songId.length), 'analysis', 'audio-features/');\n        // Error handling if no search results are returned:\n        if (data.length === 0) {\n            this.setState({\n                prompt: \"Invalid song ID\",\n                invalid: true\n            });\n            return;\n        }\n\n        // Fetch my API endpoint for sorting track feature data:\n        const sortTrackData = await fetch('/api/songSort/sortFeatures', {\n            method: 'POST',\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(data)\n        });\n        let response = await sortTrackData.json();\n\n        this.setState({\n            rawFeatures: data,\n            live: response.live,\n            acoustic: response.acoustic,\n            instrumental: response.instrumental,\n            musicality: response.musicality,\n            key: response.key\n        });\n        if (data.mode === 1) {\n            this.setState({modality: \"Major\"})\n        } else if (data.mode === 0) {\n            this.setState({modality: \"Minor\"})\n        }\n    };\n\n    waitForAlbum = async () => {\n        if (this.state.invalid === true) {\n            return;\n        }\n        const songId = this.props.location.search;\n        const data = await FetchData.fetchData(this.state.rawTrack.album.id, 'analysis', 'albums/');\n        // Error handling if no search results are returned:\n        if (data.length === 0) {\n            this.setState({\n                prompt: \"Invalid song ID\",\n                invalid: true\n            });\n            return;\n        }\n        console.log(data);\n        this.setState({\n            rawAlbum: data,\n        });\n    };\n\n    generateCharts = async () => {\n        // Fetch my API endpoint for generating track feature chart:\n        const sortTrackData = await fetch('/api/songSort/generateChart', {\n            method: 'POST',\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(this.state.rawFeatures)\n        });\n        let response = await sortTrackData.json();\n        this.setState(response);\n    }\n\n    render() {\n        return (\n            <div className=\"Main\" style={{backgroundColor: this.state.albumColours1}}>\n                <div style={{width: \"1vw\", marginLeft: \"-1vw\"}}>\n                    <BackgroundSvgPaths fill={this.state.albumColours2}/>\n                    <BackgroundSvgPaths fill={this.state.albumColours3} shiftDown=\"-100vh\"/>\n                    <BackgroundSvgPaths fill={this.state.albumColours4} shiftDown=\"100vh\"/>\n                    <BackgroundSvgPaths fill={this.state.albumColours2} shiftDown=\"200vh\"/>\n                </div>\n                <div className=\"Header\">\n                    <p>Song Analysis</p>\n                    <p id=\"Song-card\">{this.state.songCard}</p>\n                </div>\n                <div className=\"Container\">\n                    <div style={{display: \"flex\", fontSize: \"2.5vh\", padding: \"1vh\", textAlign: \"left\", paddingLeft: \"3vh\", alignContent: \"left\"}}><InfoOutlinedIcon style={{paddingRight: \"0.3vw\"}} /> Hover over an item for more information.</div>\n                    <div>\n                        <h2>Song Mood Features:<button style={{display: \"flex\", marginLeft: \"2vw\"}}>What's this?</button></h2>\n                        <hr/>\n                        <p>\n                            <HorizontalBar className=\"Chart\" data={this.state.data} options={this.state.options}/>\n                        </p>\n                    </div>\n                    <div>\n                        <h2 style={{marginBottom: \"0vh\"}}>Musical information:</h2>\n                        <p style={{fontSize: \"1.9vh\", marginLeft: \"2vh\"}}/>\n                        <hr/>\n                        <LightTooltip arrow=\"true\" enterTouchDelay=\"100\" title={<p className=\"Tooltip\">\n                            Tempo of the song in beats per minute.\n                        </p>}>\n                            <p>Tempo: {Math.round(this.state.rawFeatures.tempo)} bpm</p>\n                        </LightTooltip>\n                        <hr/>\n                        <LightTooltip arrow=\"true\" enterTouchDelay=\"100\" title={<p className=\"Tooltip\">\n                            Time signature of the song.\n                        </p>}>\n                            <p>Time signature: {this.state.rawFeatures.time_signature}/4</p>\n                        </LightTooltip>\n                        <hr/>\n                        <LightTooltip arrow=\"true\" enterTouchDelay=\"100\" title={<p className=\"Tooltip\">\n                            Musical key of the song.\n                        </p>}>\n                            <p>Key: {this.state.key}</p>\n                        </LightTooltip>\n                        <hr/>\n                        <LightTooltip arrow=\"true\" enterTouchDelay=\"100\" title={<p className=\"Tooltip\">\n                            Modality of the song (Major or Minor).\n                        </p>}>\n                            <p>Modality: {this.state.modality}</p>\n                        </LightTooltip>\n                        <hr/>\n                        <LightTooltip arrow=\"true\" enterTouchDelay=\"100\" title={<p className=\"Tooltip\">\n                            Whether the song is acoustic or not. Spotify gives songs an 'Acousticness' rating on a scale of 0.0 - 1.0.\n                            The closer to 1.0 this value is, the higher the probability that the track is acoustic. The Acousticness rating\n                            for this track is {this.state.rawFeatures.acousticness}.\n                        </p>}>\n                            <p>Acoustic: {this.state.acoustic}</p>\n                        </LightTooltip>\n                        <hr/>\n                        <LightTooltip arrow=\"true\" enterTouchDelay=\"100\" title={<p className=\"Tooltip\">\n                            Whether the song is instrumental, or contains vocals. 'Instrumentalness' is given on a scale of 0.0 - 1.0.\n                            The closer to 1.0 this value is, the higher the probability that the track is purely instrumental. The\n                            'Instrumentalness' rating for this song is {this.state.rawFeatures.liveness}.\n                        </p>}>\n                        <p>Instrumental: {this.state.instrumental}</p>\n                        </LightTooltip>\n                        <hr/>\n                        <LightTooltip arrow=\"true\" enterTouchDelay=\"100\" title={<p className=\"Tooltip\">\n                            The musicality of a song is a measure of whether it contains music or people talking. 'Speechiness' is given on a scale of 0.0 - 0.1,\n                            and songs with high Speechiness are less musical and contain more spoken words. For example, a podcast would have a 'Speechiness'\n                            value greater than 0.66, and a normal song containing singing would have a value below 0.33. Rap and poetry fall somewhere in the middle.\n                            The possibilities for Musicality are \"Musical\", \"Musical and spoken\", or \"Spoken word\". This track has a Speechiness value\n                            of {this.state.rawFeatures.speechiness}.\n                        </p>}>\n                        <p>Musicality: {this.state.musicality}</p>\n                        </LightTooltip>\n                        <hr/>\n                    </div>\n                    <div>\n                        <h2>Song details:</h2>\n                        <hr/>\n                        <LightTooltip arrow=\"true\" enterTouchDelay=\"100\" title={<p className=\"Tooltip\">\n                            The name of the song.\n                        </p>}>\n                            <p>Name: {this.state.rawTrack.name}</p>\n                        </LightTooltip>\n                        <hr/>\n                        <LightTooltip arrow=\"true\" enterTouchDelay=\"100\" title={<p className=\"Tooltip\">\n                            All artists who created and collaborated on the song.\n                        </p>}>\n                            <p>Artists: {this.state.artists}</p>\n                        </LightTooltip>\n                        <hr/>\n                        <LightTooltip arrow=\"true\" enterTouchDelay=\"100\" title={<p className=\"Tooltip\">\n                            Whether the lyrics contain explicit content or not..\n                        </p>}>\n                            <p>Explicit lyrics: {this.state.explicit}</p>\n                        </LightTooltip>\n                        <hr/>\n                        <LightTooltip arrow=\"true\" enterTouchDelay=\"100\" title={<p className=\"Tooltip\">\n                            How popular the song is. This is a number between 0 and 100, with 100 being the most popular.\n                            Popularity is based on the total number of recent plays, meaning songs which were popular in the\n                            past might now have a low popularity rating. The popularity is relative, with the most popular\n                            song on Spotify having a popularity of 100, so songs with popularity ratings that seem quite low may actually\n                            be relatively popular.\n                        </p>}>\n                            <p>Popularity: {this.state.rawTrack.popularity}</p>\n                        </LightTooltip>\n                        <hr/>\n                        <LightTooltip arrow=\"true\" enterTouchDelay=\"100\" title={<p className=\"Tooltip\">\n                            Length of the song.\n                        </p>}>\n                            <p>Length: {((this.state.rawFeatures.duration_ms) / 1000 / 60).toFixed(2)} minutes</p>\n                        </LightTooltip>\n                        <hr/>\n                        <LightTooltip arrow=\"true\" enterTouchDelay=\"100\" title={<p className=\"Tooltip\">\n                            Whether the song is live or not. This is determined by the amount of 'audience noise' detected in the recording,\n                            on a scale of 0.0 - 1.0. The 'Liveness' rating for this track is {this.state.rawFeatures.liveness}.\n                        </p>}>\n                            <p>Live: {this.state.live}</p>\n                        </LightTooltip>\n                        <hr/>\n                    </div>\n                    <div style={{paddingBottom: \"0vh\", marginBottom: \"0vh\"}}>\n                        <h2>Album preview:</h2>\n                        <hr/>\n                        {this.state.embedAlbum}\n                    </div>\n                    <div>\n                        <h2>Album details:</h2>\n                        <hr/>\n                        <p>Name: {this.state.rawAlbum.name}</p>\n                        <hr/>\n                        <p>Release date: {this.state.rawAlbum.release_date}</p>\n                        <hr/>\n                        <p>Popularity: {this.state.rawAlbum.popularity}</p>\n                        <hr/>\n                        <p>Type: {this.state.rawAlbum.album_type}</p>\n                        <hr/>\n                        <p>Record label: {this.state.rawAlbum.label}</p>\n                        <hr/>\n                    </div>\n                    <div>\n                        <h2>Available regions:</h2>\n                        <hr/>\n                        <p style={{justifyContent: \"center\", display: \"flex\"}}>\n                            <ComposableMap style={{color: \"white\", height: \"42vh\", marginRight: \"2vw\"}}>\n                                <Geographies geography=\"https://raw.githubusercontent.com/zcreativelabs/react-simple-maps/master/topojson-maps/world-110m.json\">\n                                    {({geographies}) => geographies.map(geo => {\n                                            const d = this.state.rawTrack.available_markets.find(s => s === geo.properties.ISO_A2);\n                                            return (\n                                                <Geography\n                                                    key={geo.rsmKey}\n                                                    geography={geo}\n                                                    fill={d ? \"darkred\" : \"white\"}\n                                                />\n                                            );\n                                        }\n                                    )}\n                                </Geographies>\n                            </ComposableMap>\n                        </p>\n                    </div>\n                    <div>\n                        <h2>Mood features explained:</h2>\n                        <hr/>\n                        <p>All mood feature data is taken from Spotify, who use algorithms to calculate the numbers shown.</p>\n                        <h2>Energy</h2>\n                        <p>\n                            The 'Energy' of a song determines how energetic the song feels, and is a measure of intensity and musical activity, with energetic\n                            tracks feeling fast, busy and noisy. Energy is calculated by taking into account the dynamic range,\n                            the loudness, the timbre, and the onset rate (rate of notes played). Energy is determined on a scale of 0 - 10,\n                            with 10 being the most energetic.\n                        </p>\n                        <h2>Danceability</h2>\n                        <p>\n                            The 'Danceability' of a song describes how good a track is to dance to. This takes into account\n                            a number of musical elements including tempo, how stable the rhythm is, the strength of each beat,\n                            and how regular the musical pattern is. Dancibility is determined on a scale of 0 - 10, with 10 being\n                            the most danceable.\n                        </p>\n                        <h2>Positivity</h2>\n                        <p>\n                            The happiness or 'Valence' of a song is how positive it sounds. Tracks with high valence sound more positive\n                            (happy, cheerful, euphoric) while tracks with low valence sound more negative (sad, depressed, angry).\n                            Happiness is determined on a scale of 0 - 10, with 10 being the most positive sounding.\n                        </p>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default SongResultsPage;","import {Bar} from \"react-chartjs-2\";\nimport React from \"react\";\n\nclass Histogram extends React.Component {\n    constructor() {\n        super();\n        this.state = {\n            histogram: null\n        }\n    }\n\n    componentDidMount() {\n        this.generateChart();\n    }\n\n    /**\n     * Generates a histogram for mood features, using pre-processed data provided through props which has been separated\n     * into bins of 0.5.\n     */\n    generateChart = async () => {\n        let input = {\n            data: this.props.data,\n            songIndex: this.props.songIndex\n        };\n        // Fetch my API endpoint for generating histograms for mood features:\n        const generateScore = await fetch('/api/plSort/generateHistogram', {\n            method: 'POST',\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(input)\n        });\n        let response = await generateScore.json();\n        console.log(response);\n        // Determine if the user is using Firefox browser:\n        let userAgentString = navigator.userAgent;\n        let firefoxAgent = userAgentString.indexOf(\"Firefox\") > -1;\n        let width = null;\n        let height = null;\n        if (firefoxAgent) {\n            // This fixes a bug in which graphs slowly expand over time in Firefox. This is a problem with the react-native-charts\n            // library, so this quick hacky fix is the best I can do for now. It does however break the graphs on firefox mobile.\n            response.chartOptions.responsive = false;\n            width = \"500vh\";\n            height = \"300vh\";\n        }\n        if (this.props.type === \"dance\") {\n            response.chartOptions.scales.xAxes[0].scaleLabel.labelString = \"Danceability\";\n        } else if (this.props.type === \"energy\") {\n            response.chartOptions.scales.xAxes[0].scaleLabel.labelString = \"Energy\";\n        } else {\n            response.chartOptions.scales.xAxes[0].scaleLabel.labelString = \"Positivity\";\n        }\n\n\n        this.setState({\n            histogram: <Bar data={response.chartData} options={response.chartOptions} width={width} height={height}/>\n        })\n    }\n\n    render() {\n        return (\n            this.state.histogram\n        )\n    }\n\n}\n\nexport default Histogram;","import React from 'react';\nimport FetchData from \"../Helpers/FetchData\";\nimport '../styles/PlaylistResultsPage.css'\nimport ErrorOutlineIcon from \"@material-ui/icons/ErrorOutline\";\nimport {HorizontalBar} from \"react-chartjs-2\";\nimport Histogram from \"../components/Histogram\";\nimport * as Vibrant from 'node-vibrant';\nimport BackgroundSvgPaths from \"../components/BackgroundSvgPaths\";\nimport ColorThief from 'color-thief';\nimport LightenColours from \"../Helpers/LightenColours\";\n\nclass PlaylistResultsPage extends React.Component {\n    /**\n     * Sets defaults so the page can load blank data before fetching data from the API and replacing the default values.\n     */\n    constructor() {\n        super();\n        this.state = {\n            danceHist: null,\n            energyHist: null,\n            valenceHist: null,\n            score: [],\n            chartData: [],\n            chartOptions: [],\n            featureInfo1: [],\n            featureInfo2: [],\n            featureInfoColour: [],\n            errorVis: \"hidden\",\n            fit: {\n                stDevs: [0, 0, 0],\n                sigmas: [0, 0, 0]\n            },\n            albumColours1: \"white\",\n            albumColours2: \"white\",\n            albumColours3: \"white\",\n            albumColours4: \"white\",\n            propsToState: \"\"\n        }\n    }\n\n    componentDidMount() {\n        if (typeof this.props.location.state !== \"undefined\") {\n            this.setState({propsToState: this.props.location.state})\n            this.waitFortracks();\n        } else {\n            this.props.history.push({\n                pathname: '/404',\n                }\n            );\n        }\n    }\n\n    waitFortracks = async () => {\n        // Fetch track data from my API:\n        const plTracks = await FetchData.fetchData('', 'analysis', 'playlists/' +\n            this.props.location.hash.substring(1, this.props.location.hash.length) + '/tracks');\n        let plTrackIds = '';\n        // Initialise counter for number of songs:\n        let n = 0;\n        // Generate search string from all track ids:\n        plTracks.items.forEach(track => {\n            n++;\n            // Limit results to chosen song + 100 songs from playlist:\n            if (n === 100 || track.track === null) {\n                return;\n            }\n            plTrackIds += track.track.id + ','\n        });\n        // Remove final comma:\n        plTrackIds = plTrackIds.substring(0, (plTrackIds.length) - 1);\n        // Index 0 is the song being fitted to the playlist.\n        // Fetch feature data from my API:\n        const featureData = await FetchData.fetchData(this.props.location.search.substring(1, this.props.location.search.length) +\n            ',' + plTrackIds, 'analysis', 'audio-features/?ids=');\n        // Error handling if no search results are returned:\n        if (featureData.length === 0) {\n            this.setState({\n                prompt: \"Invalid ID\",\n                invalid: true\n            });\n            return;\n        }\n        this.setBgColours();\n\n        // Fetch my API endpoint for sorting and pre-processing the data:\n        const sortData = await fetch('/api/plSort', {\n            method: 'POST',\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(featureData)\n        });\n        // Receive the sorted json data:\n        let response = await sortData.json();\n\n        // Fetch my API endpoint for generating the final fit score chart:\n        const generateScore = await fetch('/api/plFit/web', {\n            method: 'POST',\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(response.score)\n        });\n        let finalScore = await generateScore.json();\n\n        // Generate histograms and set the returned data to state:\n        this.setState({\n            score: response.score,\n            featureInfo1: response.featureInfo1,\n            featureInfo2: response.featureInfo2,\n            featureInfoColour: response.featureInfoColour,\n            fit: response.simplify.fit,\n            danceHist: <Histogram data={response.simplify.datasets.dance} songIndex={response.simplify.index.danceIndex} type=\"dance\"/>,\n            energyHist: <Histogram data={response.simplify.datasets.energy} songIndex={response.simplify.index.energyIndex} type=\"energy\"/>,\n            valenceHist: <Histogram data={response.simplify.datasets.valence} songIndex={response.simplify.index.valenceIndex} type=\"valence\"/>,\n            chartData: finalScore.chartData,\n            chartOptions: finalScore.chartOptions\n        })\n    };\n\n    /**\n     * Pulls colour palette from the album artwork for the chosen song using Vibrant library, then sets the most prominent\n     * colours to the page state. These colours are then rendered as the background once the promise has been fulfilled.\n     */\n    setBgColours() {\n        // Get bg colours using Vibrant promise:\n        const img = document.querySelector('img');\n        img.crossOrigin = \"Anonymous\";\n        const colorThief = new ColorThief();\n        // Make sure image is finished loading\n        img.addEventListener('load', function() {\n            let colour = colorThief.getColor(img);\n            Vibrant.from(img).getPalette()\n                .then((palette) => {\n                    let rgb1 = palette.Vibrant.getRgb();\n                    let rgb2 = palette.DarkVibrant.getRgb();\n                    let rgb3 = palette.DarkMuted.getRgb();\n                    let rgb4 = palette.Muted.getRgb();\n                    rgb1 = LightenColours.RGB_Linear_Shade(0.3, (\"rgb(\" + rgb1[0] + \",\" + rgb1[1] + \",\" + rgb1[2] + \")\"));\n                    rgb2 = LightenColours.RGB_Linear_Shade(0.3, (\"rgb(\" + rgb2[0] + \",\" + rgb2[1] + \",\" + rgb2[2] + \")\"));\n                    rgb3 = LightenColours.RGB_Linear_Shade(0.3, (\"rgb(\" + rgb3[0] + \",\" + rgb3[1] + \",\" + rgb3[2] + \")\"));\n                    rgb4 = LightenColours.RGB_Linear_Shade(0.3, (\"rgb(\" + rgb4[0] + \",\" + rgb4[1] + \",\" + rgb4[2] + \")\"));\n                    this.setState({\n                        albumColours1: rgb1,\n                        albumColours2: rgb2,\n                        albumColours3: rgb3,\n                        albumColours4: rgb4\n                    })}\n                )\n        }.bind(this));\n    }\n\n    //CHANGE: get new audio data every time, or the user can't bookmark this page ///////////////////////////////////////////\n    render() {\n        return (\n            <div className=\"Main-play\" style={{backgroundColor: this.state.albumColours1}}>\n                <div style={{width: \"1vw\", marginLeft: \"-1vw\"}}>\n                    <BackgroundSvgPaths fill={this.state.albumColours2}/>\n                    <BackgroundSvgPaths fill={this.state.albumColours3} shiftDown=\"-100vh\"/>\n                    <BackgroundSvgPaths fill={this.state.albumColours4} shiftDown=\"100vh\"/>\n                    <BackgroundSvgPaths fill={this.state.albumColours2} shiftDown=\"200vh\"/>\n                </div>\n                <div>\n                    <div className=\"Container-play\">\n                        <div style={{display: \"flex\", margin: \"0vh\", fontSize: \"2.5vh\", padding: \"0vh\", textAlign: \"left\", paddingLeft: \"3vh\", alignContent: \"left\", color: \"red\", visibility: this.state.errorVis}}><ErrorOutlineIcon style={{paddingRight: \"0.3vw\"}} />This playlist has less than 20 songs. Choose a playlist with more songs for a more accurate analysis.</div>\n                        <div>\n                            <h2>{this.state.propsToState.name}</h2>\n                            <h2>{this.state.propsToState.artist}</h2>\n                            <p/>\n                            <p style={{backgroundColor: \"white\", padding: \"0vh\", paddingLeft: \"0.25vw\", margin: \"1vw\"}}>\n                                <HorizontalBar data={this.state.chartData} options={this.state.chartOptions} height=\"60vh\"/>\n                            </p>\n                            <p>\n                                <p style={{fontSize: \"6vh\"}}>{Math.round((this.state.score/12) * 100)}% Fit!</p>\n                            </p>\n                        </div>\n                        <div style={{margin: \"0hv\", padding: \"0vh\", justifyContent: \"center\", display: \"flex\"}}>\n                            <p>\n                                <img src={this.state.propsToState.art} style={{margin: \"2vh\", height: \"auto\", width: \"45vh\", border: \"0.3vh solid dimgrey\"}}/>\n                            </p>\n                        </div>\n                        <div className=\"Chart-play\">\n                            <p>{this.state.danceHist}</p>\n                        </div>\n                        <div>\n                            <h2>Danceability:<p style={{color: this.state.featureInfoColour[0], margin: \"0vh\", padding: \"1vh\"}}>{this.state.featureInfo1[0]}</p></h2>\n                            <hr/>\n                            <p>{this.state.featureInfo2[0]}</p>\n                        </div>\n                        <div>\n                            <p>{this.state.energyHist}</p>\n                        </div>\n                        <div>\n                            <h2>Energy:<p style={{color: this.state.featureInfoColour[1], margin: \"0vh\", padding: \"1vh\"}}>{this.state.featureInfo1[1]}</p></h2>\n                            <hr/>\n                            <p>{this.state.featureInfo2[1]}</p>\n                        </div>\n                        <div>\n                            <p>{this.state.valenceHist}</p>\n                        </div>\n                        <div>\n                            <h2>Positivity:<p style={{color: this.state.featureInfoColour[2], margin: \"0vh\", padding: \"1vh\"}}>{this.state.featureInfo1[2]}</p></h2>\n                            <hr/>\n                            <p>{this.state.featureInfo2[2]}</p>\n                        </div>\n                        <div id=\"Detail\">\n                            <h2>Mood features explained:</h2>\n                            <hr/>\n                            <p>All mood feature data is taken from Spotify, who use algorithms to calculate the numbers shown.</p>\n                            <h2>Energy</h2>\n                            <p>\n                                The 'Energy' of a song determines how energetic the song feels, and is a measure of intensity and musical activity, with energetic\n                                tracks feeling fast, busy and noisy. Energy is calculated by taking into account the dynamic range,\n                                the loudness, the timbre, and the onset rate (rate of notes played). Energy is determined on a scale of 0 - 10,\n                                with 10 being the most energetic.\n                            </p>\n                            <p>\n                                The standard deviation of Energy values for the songs in this playlist is {this.state.fit.stDevs[1].toFixed(3)}.\n                                The Energy of your song falls within {this.state.fit.sigmas[1]}  (sigma) of the distribution.\n                            </p>\n                            <h2>Danceability</h2>\n                            <p>\n                                The 'Danceability' of a song describes how good a track is to dance to. This takes into account\n                                a number of musical elements including tempo, how stable the rhythm is, the strength of each beat,\n                                and how regular the musical pattern is. Dancibility is determined on a scale of 0 - 10, with 10 being\n                                the most danceable.\n                            </p>\n                            <p>\n                                The standard deviation of Danceability values for the songs in this playlist is {this.state.fit.stDevs[0].toFixed(3)}.\n                                The danceability of your song falls within {this.state.fit.sigmas[0]}  (sigma) of the distribution.\n                            </p>\n                            <h2>Positivity</h2>\n                            <p>\n                                The happiness or 'Valence' of a song is how positive it sounds. Tracks with high valence sound more positive\n                                (happy, cheerful, euphoric) while tracks with low valence sound more negative (sad, depressed, angry).\n                                Happiness is determined on a scale of 0 - 10, with 10 being the most positive sounding.\n                            </p>\n                            <p>\n                                The standard deviation of Positivity values for the songs in this playlist is {this.state.fit.stDevs[2].toFixed(3)}.\n                                The Positivity of your song falls within {this.state.fit.sigmas[2]}  (sigma) of the distribution.\n                            </p>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default PlaylistResultsPage;","import React from 'react';\nimport '../styles/NotFound.css'\n\nexport default class NotFound extends React.Component {\n    /**\n     * Default constructor for main app.\n     * @param props\n     */\n\n    render() {\n        return(\n            <div className=\"Not-found\">\n                <div>404 Not Found</div>\n                <div>Oops! Something went wrong. Go back to the home page to continue.</div>\n            </div>\n        )\n    }\n}","import React from 'react';\nimport {BrowserRouter as Router, Route, Redirect, Switch, Link } from \"react-router-dom\";\nimport HomePage from \"./routes/HomePage\";\nimport SongSearchPage from \"./routes/SongSearchPage\";\nimport PlaylistSearchPage from \"./routes/PlaylistSearchPage\";\nimport AboutPage from \"./routes/AboutPage\";\nimport ContactPage from \"./routes/ContactPage\";\nimport SongResultsPage from \"./routes/SongResultsPage\";\nimport PlaylistResultsPage from \"./routes/PlaylistResultsPage\";\nimport './styles/App.css';\nimport NotFound from \"./routes/NotFound\";\n\n/**\n * Main page of the app. Only handles routing, then gets passed to index.js for rendering.\n */\nclass App extends React.Component {\n    constructor() {\n        super();\n        this.state = {\n            clicked: false\n        }\n    }\n\n    render() {\n        return (\n            <Router>\n                <nav className=\"Navbar\">\n                    <ul>\n                        <li style={{float: \"left\", fontSize: \"3vh\"}}><Link to=\"/\">SongMap</Link></li>\n                        <li><Link to=\"/about\">About</Link></li>\n                        <li><Link to=\"/contact\">Contact</Link></li>\n                        <li><Link to=\"/\">Home</Link></li>\n                    </ul>\n                </nav>\n                <Switch>\n                    <Route path=\"/\" exact component={HomePage}/>\n                    <Route path=\"/songs\" component={SongResultsPage}/>\n                    <Route path=\"/playlists\" component={PlaylistResultsPage}/>\n                    <Route path=\"/song-playlist\" component={PlaylistSearchPage}/>\n                    <Route path=\"/about\" component={AboutPage}/>\n                    <Route path=\"/contact\" component={ContactPage}/>\n                    <Route path=\"/404\" component={NotFound}/>\n                    <Route path=\"/song\"   render={(props) => (\n                        <SongSearchPage {...props} chain=\"song\" />\n                    )}/>\n                    <Route path=\"/playlist\" render={(props) => (\n                        <SongSearchPage {...props} chain=\"playlist\" />\n                    )}/>\n                </Switch>\n            </Router>\n        )\n    }\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './styles/index.css';\nimport * as serviceWorker from './serviceWorker';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = __webpack_public_path__ + \"static/media/hellify.aede5c89.png\";"],"sourceRoot":""}